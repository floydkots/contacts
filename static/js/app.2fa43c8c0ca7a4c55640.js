webpackJsonp([1],{"/hDX":function(t,e){},"439b":function(t,e){},"5QSd":function(t,e){},"9UlL":function(t,e){},AM44:function(t,e){},BV0c:function(t,e){},FCmO:function(t,e){},Gw1z:function(t,e){},M8Qy:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCABQAFADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAMFBwgGBAH/xAA3EAABAwMBBAgEBQQDAAAAAAABAgMEAAURBhIhMUEHEyI0UXOBsRRhcZEII0Kh8DJSgpIWM+L/xAAZAQACAwEAAAAAAAAAAAAAAAAABAEDBQL/xAAkEQACAgICAgEFAQAAAAAAAAAAAQIDBBESITFBkRQiUWFx0f/aAAwDAQACEQMRAD8A2XRRRQAuS+xGYXIkvNsstp2luOKCUpHiSeFcHdelnTcd0tW5qbdiDgrjNgN+ilEZ9M1WvSdqx7V1+ehNSdiwwXi202k96cScFxXiMghI9eJrw2thK0gNDCc4AAped3eojtOLyXKRacHpXtrq8SrLdI6P7wEOY9ArNdvZbtbrzDEu2ykSGjuJTuKT4EHeD8jWf5MZTO0F5BosF/uFguYmQXcK4LQrOy4nwI/mK4+ocX9xbPCTW4GjqKitK3uNqCzM3GMCna7LjZOS2scUn+cCKlaaT2tozmmnphSLh3CR5SvY0+kXDuEjylexqSB9QPSHcjaNDXq4pUULYhOqQocQrZIH7kVPVz3SVaHr7oG+WmOCX5MJxLQHNeMpH3AqH4JXkyRCln4hKUEhKDhIzVo6OaUsB1wpCccBVHNXqHa4/wAZMbdfWk/9LScqH15D1rt+jy6ai1GxJnNsKtcZhaAiOsDadbVxcKjuAHgBms6uM3Lwbl2TTTXuT+Oy2ZoghtS5K0gJBOc1XmpL+wygvWuyTZylkpQsJCGyfqeX8FQL921D/wAivlvlRVvojO5hrad6xTLZTgKUgpAc3jbGMEAkYO6usN0RP0ddnGZDcS6gAtpUgdU5uwVDj2vryHKmFXGXUn2IX5lsIwnTBuL9+9fpf78Hl0Lr7XdpfQm2WywMw5M6M1KblPOqWEqcCFFBASkHBPHPDnWpxWMLGqS+27GhOzJaZAS28pwJDbYwAtRWBgknJCRkjIGRxrWmg5LkvSNudddS6sNbClg5zskp++AKsqnHXFejjJqkm5vwybpFw7hI8pXsafSLh3CR5SvY1cKD6+KAKSDz3V9ooAwbfodoj6ivLNpluSLa1NWqK6+NjrWzxSdr9aVZTv44B51EWW6XWNf1pkOvXeIphSG4rSew2tWMEqBwojH6jz4Yq4vxA6ATp67qu0dh523TpC3UqAGwwtW9SFeu9JPLdyrjtNzITa0FSU5TyHOs6c5QlvXZs0YtUu1LafonujaXJl3e4XLU62Y8iQ6lBBPBCEhKcnmQBvI51K6ie0lG1E0OqMtb69g9U0VoUeW34fU1wuoYUWXd0XF95RCVZSypWy2knifWuvsloakw2zCbSCkbmoze7PiTk5P2rhRlY3LY+lCuKhFdIn5ioLTJTGjhpOP6QnHtVx9EJZVoSEplZUVKcLmeS9s5FZ8Q3cItwmJm7Gw0lAShPEZO8qPj9PnVzdAMpa7Nc4Sv6GJQUn/JP/mmqVpmZnvcf4WXSLh3CR5SvY0+kXDuEjylexpoyh9FFFAC5DLMhlTL7SHW1cULSFA+hrIvT9pA6N1yuVCaU1bbkS/GIHZSrP5jfoTkfIjwrX1QeudK2fWOn3rNeWOsYc7SFp3LZWOC0nkR+/A7qrshzRdRc6pbMUxYqbk8mYHlOSGuDTq8t/68Ksyw6o1Ki2ItkKNb4IA3utp2lkfIbh71UGoo920fqifaJ7Si9AfUytaBuUAdyvoRg+te+FrzqO02+jaH3peCaZsO9cdFhS3PhGnfiHHFvPHLi3T2lnxq3fw3T4suw3RCBiSmWFL+aNkBP7pVWX3Lnd748l5QdQys7nF8x8hVq9DF7esOtrJBigrRcnvg3W/FJQpW1/iU5+9dpqM0he6Dtrb/AAaipFw7hI8pXsaeN4pFw7hI8pXsaZMkfRRRQAUUUUAZA/EfBn2rpRmXG5QVptVwbQtiaEEt7Y7KkLVwSoYBAPEGuCjR7QXw438OSeeRW9ZcOLLaW1JjtPNuDC0LSFJUPAg7j61yEzom6N5b/XP6NtBXnOUMbA+ycCqLKeT2mPUZirioyWzLMddsbaQyh/rpC1flsMgrcWfBKRvNXb0EdGNyt92RrLVTJjTG21It0BRyqOlYwpxzH6yNwT+kE53ndaendIaX08dqyWC3QF/3ssJC/wDbj+9TlTCnT2yL8x2R4xWkFIuHcJHlK9jT6RcO4SPKV7GrhI//2Q=="},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};i.d(a,"setContacts",function(){return Bt}),i.d(a,"setNewContact",function(){return Lt}),i.d(a,"toggleViewContact",function(){return Nt}),i.d(a,"setViewTransition",function(){return Mt}),i.d(a,"toggleAddContact",function(){return Ht}),i.d(a,"toggleEditContact",function(){return zt}),i.d(a,"toggleDeleteContact",function(){return Ft}),i.d(a,"setSlim",function(){return Ut}),i.d(a,"toggleDrawer",function(){return qt}),i.d(a,"toggleSearch",function(){return Wt}),i.d(a,"setSelected",function(){return Vt}),i.d(a,"setActiveId",function(){return jt}),i.d(a,"toggleStar",function(){return Gt}),i.d(a,"setTooltips",function(){return Xt}),i.d(a,"setSnackbar",function(){return Qt});var n=i("7+uW"),o=i("mvHQ"),s=i.n(o),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-navigation-drawer",{attrs:{fixed:"",clipped:"",app:""},model:{value:t.$store.state.drawer,callback:function(e){t.$set(t.$store.state,"drawer",e)},expression:"$store.state.drawer"}},[i("v-list",{attrs:{dense:""}},[t._l(t.items,function(e,a){return[e.heading?i("v-layout",{key:a,attrs:{row:"","align-center":""}},[i("v-flex",{attrs:{xs6:""}},[e.heading?i("v-subheader",[t._v("\n            "+t._s(e.heading)+"\n          ")]):t._e()],1),t._v(" "),i("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[i("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.children?i("v-list-group",{attrs:{"no-action":""},model:{value:e.model,callback:function(i){t.$set(e,"model",i)},expression:"item.model"}},[i("v-list-tile",{attrs:{slot:"item"},on:{click:function(t){}},slot:"item"},[i("v-list-tile-action",[i("v-icon",[t._v(t._s(e.model?e.icon:e["icon-alt"]))])],1),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1),t._v(" "),t._l(e.children,function(e,a){return i("v-list-tile",{key:a,on:{click:function(t){}}},[e.icon?i("v-list-tile-action",[i("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1)})],2):e.divider?i("v-divider",{staticClass:"mt-1 mb-1",attrs:{inset:e.inset}}):i("v-list-tile",{attrs:{to:e.route?e.route:null,exact:!0},on:{click:function(t){}}},[i("v-list-tile-action",[i("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n            "+t._s("Contacts"===e.text?e.text+" ("+t.numOfContacts+")":""+e.text)+"\n          ")])],1)],1)]})],2)],1)},staticRenderFns:[]};var l=i("VU/8")({name:"drawer",data:function(){return{numOfContacts:0,items:[{icon:"contacts",text:"Contacts",route:"/contacts"},{icon:"history",text:"Frequently accessed",route:"/frequent"},{icon:"content_copy",text:"Duplicates",route:"/merge"},{divider:!0,inset:!1},{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"Labels",model:!1,children:[{icon:"add",text:"Create label"}]},{divider:!0,inset:!1},{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{text:"Import"},{text:"Export"},{text:"Print"},{text:"Undo changes"},{text:"Other contacts"}]},{divider:!0,inset:!1},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"Send feedback"},{icon:"help",text:"Help"}]}},beforeUpdate:function(){this.numOfContacts=this.$store.getters.getContacts.length}},r,!1,function(t){i("/hDX")},"data-v-03089c5a",null).exports,c=i("7t+N"),h={name:"main-toolbar",data:function(){return{}},methods:{toggleSearch:function(){this.$store.dispatch("toggleSearch"),this.$nextTick(function(){c("#search").focus()})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{ref:"main_toolbar",attrs:{color:"blue darken-3",dark:"",app:"",fixed:"","clipped-left":"",prominent:!0}},[a("v-toolbar-title",{staticClass:"ma-0 pl-1",style:t.$vuetify.breakpoint.smAndUp?"width: 200px min-width: 100px":"min-width: 72px"},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.dispatch("toggleDrawer")}}}),t._v(" "),a("span",{staticClass:"hidden-xs-only"},[a("b",[t._v("Kots")]),t._v(" Contacts\n      ")])],1),t._v(" "),a("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[a("span",[t._v("Search")]),t._v(" "),a("v-btn",{attrs:{slot:"activator",flat:"",icon:""},on:{click:t.toggleSearch},slot:"activator"},[a("v-icon",[t._v("\n          search\n        ")])],1)],1),t._v(" "),a("div",{staticClass:"d-flex align-center",staticStyle:{"margin-left":"auto"}},[a("v-btn",{attrs:{icon:"",large:""}},[a("v-avatar",{attrs:{size:"32px"}},[a("img",{attrs:{src:i("M8Qy"),alt:"Floyd Kots"}})])],1)],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(h,u,!1,function(t){i("BV0c")},"data-v-fdc1718e",null).exports,p={name:"search-toolbar",data:function(){return{items:[],search:null,select:null}},watch:{search:function(t){this.$store.state.contacts.length>0&&this.queryContacts(t)},select:function(t){this.$store.state.contacts.length>0&&null!==t&&void 0!==t&&(this.$store.dispatch("setActiveId",t),this.$store.dispatch("toggleViewContact"),this.$store.dispatch("toggleSearch"),this.$refs.search.clearableCallback())}},methods:{queryContacts:function(t){this.items=t?this.$store.state.contacts.filter(function(e){return(e.fullName||"").toLowerCase().indexOf((t||"").toLowerCase())>-1}):[]}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{ref:"search_toolbar",style:{opacity:t.$store.state.search?1:0},attrs:{color:"blue darken-3",dark:"",app:"",fixed:"",prominent:!0,"clipped-left":"","manual-scroll":!t.$store.state.search}},[i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Back")]),t._v(" "),i("v-btn",{attrs:{slot:"activator",flat:"",icon:""},on:{click:function(e){t.$store.dispatch("toggleSearch")}},slot:"activator"},[i("v-icon",[t._v("\n        keyboard_backspace\n      ")])],1)],1),t._v(" "),i("v-select",{ref:"search",attrs:{id:"search",clearable:"","append-icon":"","prepend-icon":"search",placeholder:"Search",autocomplete:"",solo:"",light:"",required:"",items:t.items,"item-text":"fullName","item-value":"id","search-input":t.search},on:{"update:searchInput":function(e){t.search=e}},scopedSlots:t._u([{key:"item",fn:function(e){return t.$store.state.contacts.length>0?[i("v-list-tile-avatar",[i("v-avatar",{class:e.item.avatar?"":e.item.color,style:{justifyContent:"center",minWidth:"40px"},attrs:{size:"40px"}},[e.item.avatar?i("img",{attrs:{src:e.item.avatar.thumbnail||e.item.avatar.avatar,alt:"avatar"}}):i("span",{staticClass:"headline white--text"},[t._v("\n            "+t._s(e.item.fullName?e.item.fullName.slice(0,1).toUpperCase():"")+"\n          ")])])],1),t._v(" "),i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.fullName)}})]:void 0}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)},staticRenderFns:[]};var f=i("VU/8")(p,v,!1,function(t){i("S7bA")},"data-v-43f2ac75",null).exports,m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{ref:"select_toolbar",style:{opacity:t.$store.getters.getNumSelected<=0?0:1},attrs:{color:"blue lighten-5",light:"",app:"",fixed:"",prominent:!0,"clipped-left":"","manual-scroll":t.$store.getters.getNumSelected<=0}},[i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Back")]),t._v(" "),i("v-btn",{staticClass:"ml-0 mr-2",attrs:{slot:"activator",color:"grey darken-3",flat:"",icon:""},on:{click:function(e){t.$store.dispatch("setSelected",[])}},slot:"activator"},[i("v-icon",[t._v("\n        keyboard_backspace\n      ")])],1)],1),t._v(" "),t.$vuetify.breakpoint.smAndUp?i("span",{staticClass:"subheading mr-5"},[t._v("\n    Back\n  ")]):t._e(),t._v(" "),i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Select all")]),t._v(" "),i("v-checkbox",{staticClass:"ml-3 mr-2",attrs:{slot:"activator",color:"blue darken-4","hide-details":"",light:""},nativeOn:{click:function(t){}},slot:"activator",model:{value:t.all,callback:function(e){t.all=e},expression:"all"}})],1),t._v(" "),i("span",{staticClass:"ml-2 subheading",style:{color:"blue"}},[t._v("\n    "+t._s(t.$store.getters.getNumSelected)+" selected\n  ")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Manage labels")]),t._v(" "),i("v-btn",{attrs:{slot:"activator",color:"grey darken-3",flat:"",icon:""},on:{click:function(t){}},slot:"activator"},[i("v-icon",[t._v("\n      label\n    ")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"","max-width":100,disabled:t.$store.state.tooltips}},[i("span",[t._v("More actions")]),t._v(" "),i("v-menu",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",bottom:"",left:"",origin:"center center",transition:"scale-transition","min-width":250},slot:"activator"},[i("v-btn",{attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},slot:"activator"},[i("v-icon",[t._v("more_vert")])],1),t._v(" "),i("v-list",t._l(t.$store.getters.getMoreItems,function(e){return i("v-list-tile",{key:e.title,attrs:{avatar:""},on:{click:function(t){}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("\n              "+t._s(e.icon)+"\n            ")])],1),t._v(" "),i("v-list-tile-title",{staticClass:"body-1 pl-0 ml-0"},[t._v("\n            "+t._s(e.title)+"\n          ")])],1)}))],1)],1)],1)},staticRenderFns:[]};var _=i("VU/8")({name:"select-toolbar",data:function(){return{}},computed:{all:{get:function(){return this.$store.getters.allSelected},set:function(t){t?this.$store.dispatch("setSelected",this.$store.getters.getContacts.slice()):this.$store.dispatch("setSelected",[])}}}},m,!1,function(t){i("9UlL")},"data-v-3ac804c2",null).exports,g=i("//Fk"),y=i.n(g),w=i("Sazm"),b=i.n(w),x=i("BO1k"),k=i.n(x),C=b.a.initializeApp({apiKey:"AIzaSyB87EDUtC2-oH_bpwCaWIRijHQQvSC3Qqs",authDomain:"kots-contacts.firebaseapp.com",databaseURL:"https://kots-contacts.firebaseio.com",projectId:"kots-contacts",storageBucket:"kots-contacts.appspot.com",messagingSenderId:"920402365801"}),S=C.database().ref().child("contacts"),E=C.storage().ref(),A=function(t,e){b.a.database().ref("contacts/"+t.id).set(t,function(t){e(t)})},T=i("Zzip"),I=i.n(T),R=i("pFYg"),O=i.n(R),$=i("5QVw"),P=i.n($),D=i("C4MV"),B=i.n(D),L="undefined"!=typeof window?function(){!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t}();var t=function t(e,i,a){var n,o,s=document.createElement("img");if(s.onerror=i,s.onload=function(){!o||a&&a.noRevoke||t.revokeObjectURL(o),i&&i(t.scale(s,a))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))n=o=t.createObjectURL(e),s._type=e.type;else{if("string"!=typeof e)return!1;n=e,a&&a.crossOrigin&&(s.crossOrigin=a.crossOrigin)}return n?(s.src=n,s):t.readFile(e,function(t){var e=t.target;e&&e.result?s.src=e.result:i&&i(t)})},e=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var i,a,n,o,s=e.aspectRatio;if(!s)return e;i={};for(a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);return i.crop=!0,(n=t.naturalWidth||t.width)/(o=t.naturalHeight||t.height)>s?(i.maxWidth=o*s,i.maxHeight=o):(i.maxWidth=n,i.maxHeight=n/s),i},t.renderImageToCanvas=function(t,e,i,a,n,o,s,r,l,c){return t.getContext("2d").drawImage(e,i,a,n,o,s,r,l,c),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,i){i=i||{};var a,n,o,s,r,l,c,h,u,d,p,v=document.createElement("canvas"),f=e.getContext||t.hasCanvasOption(i)&&v.getContext,m=e.naturalWidth||e.width,_=e.naturalHeight||e.height,g=m,y=_;function w(){var t=Math.max((o||g)/g,(s||y)/y);t>1&&(g*=t,y*=t)}function b(){var t=Math.min((a||g)/g,(n||y)/y);t<1&&(g*=t,y*=t)}if(f&&(c=(i=t.getTransformedOptions(e,i)).left||0,h=i.top||0,i.sourceWidth?(r=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(c=m-r-i.right)):r=m-c-(i.right||0),i.sourceHeight?(l=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(h=_-l-i.bottom)):l=_-h-(i.bottom||0),g=r,y=l),a=i.maxWidth,n=i.maxHeight,o=i.minWidth,s=i.minHeight,f&&a&&n&&i.crop?(g=a,y=n,(p=r/l-a/n)<0?(l=n*r/a,void 0===i.top&&void 0===i.bottom&&(h=(_-l)/2)):p>0&&(r=a*l/n,void 0===i.left&&void 0===i.right&&(c=(m-r)/2))):((i.contain||i.cover)&&(o=a=a||o,s=n=n||s),i.cover?(b(),w()):(w(),b())),f){if((u=i.pixelRatio)>1&&(v.style.width=g+"px",v.style.height=y+"px",g*=u,y*=u,v.getContext("2d").scale(u,u)),(d=i.downsamplingRatio)>0&&d<1&&g<r&&y<l)for(;r*d>g;)v.width=r*d,v.height=l*d,t.renderImageToCanvas(v,e,c,h,r,l,0,0,v.width,v.height),r=v.width,l=v.height,(e=document.createElement("canvas")).width=r,e.height=l,t.renderImageToCanvas(e,v,0,0,r,l,0,0,r,l);return v.width=g,v.height=y,t.transformCoordinates(v,i),t.renderImageToCanvas(v,e,c,h,r,l,0,0,g,y)}return e.width=g,e.height=y,e},t.createObjectURL=function(t){return!!e&&e.createObjectURL(t)},t.revokeObjectURL=function(t){return!!e&&e.revokeObjectURL(t)},t.readFile=function(t,e,i){if(window.FileReader){var a=new FileReader;if(a.onload=a.onerror=e,a[i=i||"readAsDataURL"])return a[i](t),a}return!1};var i=t.hasCanvasOption,a=t.transformCoordinates,n=t.getTransformedOptions;t.hasCanvasOption=function(e){return!!e.orientation||i.call(t,e)},t.transformCoordinates=function(e,i){a.call(t,e,i);var n=e.getContext("2d"),o=e.width,s=e.height,r=e.style.width,l=e.style.height,c=i.orientation;if(c&&!(c>8))switch(c>4&&(e.width=s,e.height=o,e.style.width=l,e.style.height=r),c){case 2:n.translate(o,0),n.scale(-1,1);break;case 3:n.translate(o,s),n.rotate(Math.PI);break;case 4:n.translate(0,s),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-s);break;case 7:n.rotate(.5*Math.PI),n.translate(o,-s),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-o,0)}},t.getTransformedOptions=function(e,i){var a,o,s=n.call(t,e,i),r=s.orientation;if(!r||r>8||1===r)return s;a={};for(o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);switch(s.orientation){case 2:a.left=s.right,a.right=s.left;break;case 3:a.left=s.right,a.top=s.bottom,a.right=s.left,a.bottom=s.top;break;case 4:a.top=s.bottom,a.bottom=s.top;break;case 5:a.left=s.top,a.top=s.left,a.right=s.bottom,a.bottom=s.right;break;case 6:a.left=s.top,a.top=s.right,a.right=s.bottom,a.bottom=s.left;break;case 7:a.left=s.bottom,a.top=s.right,a.right=s.top,a.bottom=s.left;break;case 8:a.left=s.bottom,a.top=s.left,a.right=s.top,a.bottom=s.right}return s.orientation>4&&(a.maxWidth=s.maxHeight,a.maxHeight=s.maxWidth,a.minWidth=s.minHeight,a.minHeight=s.minWidth,a.sourceWidth=s.sourceHeight,a.sourceHeight=s.sourceWidth),a};var o=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=o&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[]}},t.parseMetaData=function(e,i,a){var n=this,o=(a=a||{}).maxMetaDataSize||262144,s={};!!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,o),function(e){if(e.target.error)i(s);else{var o,r,l,c,h=e.target.result,u=new DataView(h),d=2,p=u.byteLength-4,v=d;if(65496===u.getUint16(0)){for(;d<p&&((o=u.getUint16(d))>=65504&&o<=65519||65534===o)&&!(d+(r=u.getUint16(d+2)+2)>u.byteLength);){if(l=t.metaDataParsers.jpeg[o])for(c=0;c<l.length;c+=1)l[c].call(n,u,d,r,s,a);v=d+=r}!a.disableImageHead&&v>6&&(h.slice?s.imageHead=h.slice(0,v):s.imageHead=new Uint8Array(h).subarray(0,v))}i(s)}},"readAsArrayBuffer")||i(s)},(t.ExifMap=function(){return this}).prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(t,e,i){var a,n,o;if(i&&!(e+i>t.byteLength)){for(a=[],n=0;n<i;n+=1)o=t.getUint8(e+n),a.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+a.join("%")}},(t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}})[7]=t.exifTagTypes[1],t.getExifValue=function(e,i,a,n,o,s){var r,l,c,h,u,d,p=t.exifTagTypes[n];if(p&&!((l=(r=p.size*o)>4?i+e.getUint32(a+8,s):a+8)+r>e.byteLength)){if(1===o)return p.getValue(e,l,s);for(c=[],h=0;h<o;h+=1)c[h]=p.getValue(e,l+h*p.size,s);if(p.ascii){for(u="",h=0;h<c.length&&"\0"!==(d=c[h]);h+=1)u+=d;return u}return c}},t.parseExifTag=function(e,i,a,n,o){var s=e.getUint16(a,n);o.exif[s]=t.getExifValue(e,i,a,e.getUint16(a+2,n),e.getUint32(a+4,n),n)},t.parseExifTags=function(t,e,i,a,n){var o,s,r;if(!(i+6>t.byteLength||(s=i+2+12*(o=t.getUint16(i,a)))+4>t.byteLength)){for(r=0;r<o;r+=1)this.parseExifTag(t,e,i+2+12*r,a,n);return t.getUint32(s,a)}},t.parseExifData=function(e,i,a,n,o){if(!o.disableExif){var s,r,l,c=i+10;if(1165519206===e.getUint32(i+4)&&!(c+8>e.byteLength)&&0===e.getUint16(i+8)){switch(e.getUint16(c)){case 18761:s=!0;break;case 19789:s=!1;break;default:return}42===e.getUint16(c+2,s)&&(r=e.getUint32(c+4,s),n.exif=new t.ExifMap,(r=t.parseExifTags(e,c,c+r,s,n))&&!o.disableExifThumbnail&&(r=t.parseExifTags(e,c,c+r,s,l={exif:{}}),l.exif[513]&&(n.exif.Thumbnail=t.getExifThumbnail(e,c+l.exif[513],l.exif[514]))),n.exif[34665]&&!o.disableExifSub&&t.parseExifTags(e,c,c+n.exif[34665],s,n),n.exif[34853]&&!o.disableExifGps&&t.parseExifTags(e,c,c+n.exif[34853],s,n))}}},t.metaDataParsers.jpeg[65505].push(t.parseExifData);var r=function(){var t=[],e=[],i=[],a="transform",n=window.getComputedStyle(document.documentElement,"");"webkit"===(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||""===n.OLink&&["","o"])[1]&&(a="webkitTransform");var o=function(t,e,i){var a=t;if(void 0!==a.length){for(var n={chainers:[],then:function(t){return this.snabbt(t)},snabbt:function(t){var e=this.chainers.length;return this.chainers.forEach(function(i,a){i.snabbt(s(t,a,e))}),n},setValue:function(t){return this.chainers.forEach(function(e){e.setValue(t)}),n},finish:function(){return this.chainers.forEach(function(t){t.finish()}),n},rollback:function(){return this.chainers.forEach(function(t){t.rollback()}),n}},o=0,l=a.length;o<l;++o)"string"==typeof e?n.chainers.push(r(a[o],e,s(i,o,l))):n.chainers.push(r(a[o],s(e,o,l),i));return n}return"string"==typeof e?r(a,e,s(i,0,1)):r(a,s(e,0,1),i)},s=function(t,e,i){if(!t)return t;var a=M(t);N(t.delay)&&(a.delay=t.delay(e,i)),N(t.callback)&&(a.complete=function(){t.callback.call(this,e,i)});var n=N(t.allDone),o=N(t.complete);(o||n)&&(a.complete=function(){o&&t.complete.call(this,e,i),n&&e==i-1&&t.allDone()}),N(t.valueFeeder)&&(a.valueFeeder=function(a,n){return t.valueFeeder(a,n,e,i)}),N(t.easing)&&(a.easing=function(a){return t.easing(a,e,i)});return["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"].forEach(function(n){N(t[n])&&(a[n]=t[n](e,i))}),a},r=function(t,i,a){if("attention"===i)return l(t,a);if("stop"===i)return c(t);if("detach"===i)return u(t);var n=i;v();var o=m(t),r=o;r=_(n,r,!0);var h=M(o);h=_(n,h);var d=g(r,h,n),p=x(d);e.push([t,p]),p.updateElement(t,!0);var f=[],y={snabbt:function(t){return f.unshift(s(t,0,1)),y},then:function(t){return this.snabbt(t)}};return w(function i(a){if(p.tick(a),p.updateElement(t),!p.isStopped())return p.completed()?void(n.loop>1&&!p.isStopped()?(n.loop-=1,p.restart(),w(i)):(n.complete&&n.complete.call(t),f.length&&(n=f.pop(),r=_(n,h,!0),h=_(n,M(h)),n=g(r,h,n),p=x(n),e.push([t,p]),p.tick(a),w(i)))):w(i)}),n.manual?p:y},l=function(t,i){var a=_(i,O({}));i.movement=a;var n=k(i);e.push([t,n]);w(function e(a){n.tick(a),n.updateElement(t),n.completed()?(i.callback&&i.callback(t),i.loop&&i.loop>1&&(i.loop--,n.restart(),w(e))):w(e)})},c=function(t){for(var i=0,a=e.length;i<a;++i){var n=e[i],o=n[0],s=n[1];o===t&&s.stop()}},h=function(t,e){for(var i=0,a=t.length;i<a;++i)if(t[i][0]===e)return i;return-1},u=function(t){var a,n,o=[],s=e.concat(i),r=s.length;for(n=0;n<r;++n)a=s[n][0],(t.contains(a)||t===a)&&o.push(a);for(r=o.length,n=0;n<r;++n)d(o[n])},d=function(t){c(t);var a=h(e,t);a>=0&&e.splice(a,1),(a=h(i,t))>=0&&i.splice(a,1)},p=function(t,e){for(var i=0,a=t.length;i<a;++i){var n=t[i],o=n[0],s=n[1];if(o===e){var r=s.getCurrentState();return s.stop(),r}}},v=function(){i=i.filter(function(t){return f(t[0]).body})},f=function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e},m=function(t){var a=p(e,t);return a||p(i,t)},_=function(t,e,i){e||(e=O({position:[0,0,0],rotation:[0,0,0],rotationPost:[0,0,0],scale:[1,1],skew:[0,0]}));var a="position",n="rotation",o="skew",s="rotationPost",r="scale",l="scalePost",c="width",h="height",u="opacity";return i&&(a="fromPosition",n="fromRotation",o="fromSkew",s="fromRotationPost",r="fromScale",l="fromScalePost",c="fromWidth",h="fromHeight",u="fromOpacity"),e.position=D(t[a],e.position),e.rotation=D(t[n],e.rotation),e.rotationPost=D(t[s],e.rotationPost),e.skew=D(t[o],e.skew),e.scale=D(t[r],e.scale),e.scalePost=D(t[l],e.scalePost),e.opacity=t[u],e.width=t[c],e.height=t[h],e},g=function(t,e,i){return i.startState=t,i.endState=e,i},y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},w=function(e){0===t.length&&y(b),t.push(e)},b=function a(n){for(var o=t.length,s=0;s<o;++s)t[s](n);t.splice(0,o);var r=e.filter(function(t){return t[1].completed()});i=(i=i.filter(function(t){for(var e=0,i=r.length;e<i;++e)if(t[0]===r[e][0])return!1;return!0})).concat(r),e=e.filter(function(t){return!t[1].completed()}),0!==t.length&&y(a)},x=function(t){var e=t.startState,i=t.endState,a=D(t.duration,500),n=D(t.delay,0),o=t.perspective,s=E(D(t.easing,"linear"),t),r=0===a?i.clone():e.clone();t.transformOrigin;r.transformOrigin=t.transformOrigin;var l,c,h=0,u=0,d=!1,p=!1,v=t.manual,f=0,m=n/a;return c=t.valueFeeder?P(t.valueFeeder,e,i,r):$(e,i,r),{stop:function(){d=!0},isStopped:function(){return d},finish:function(t){v=!1;h=u-a*f,l=t,s.resetFrom=f},rollback:function(t){v=!1,c.setReverse();h=u-a*(1-f),l=t,s.resetFrom=f},restart:function(){h=void 0,s.resetFrom(0)},tick:function(t){if(!d){if(v)return u=t,void this.updateCurrentTransform();if(h||(h=t),t-h>n){p=!0,u=t-n;var e=Math.min(Math.max(0,u-h),a);s.tick(e/a),this.updateCurrentTransform(),this.completed()&&l&&l()}}},getCurrentState:function(){return r},setValue:function(t){p=!0,f=Math.min(Math.max(t,1e-4),1+m)},updateCurrentTransform:function(){var t=s.getValue();if(v){var e=Math.max(1e-5,f-m);s.tick(e),t=s.getValue()}c.tween(t)},completed:function(){return!!d||0!==h&&s.completed()},updateElement:function(t,e){if(p||e){var i=c.asMatrix(),a=c.getProperties();B(t,i,o),L(t,a)}}}},k=function(t){var e=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var i=C(t),a=!1,n=e.position,o=e.rotation,s=e.rotationPost,r=e.scale,l=e.skew,c=O({position:n?[0,0,0]:void 0,rotation:o?[0,0,0]:void 0,rotationPost:s?[0,0,0]:void 0,scale:r?[0,0]:void 0,skew:l?[0,0]:void 0});return{stop:function(){a=!0},isStopped:function(t){return a},tick:function(t){a||i.equilibrium||(i.tick(),this.updateMovement())},updateMovement:function(){var t=i.getValue();n&&(c.position[0]=e.position[0]*t,c.position[1]=e.position[1]*t,c.position[2]=e.position[2]*t),o&&(c.rotation[0]=e.rotation[0]*t,c.rotation[1]=e.rotation[1]*t,c.rotation[2]=e.rotation[2]*t),s&&(c.rotationPost[0]=e.rotationPost[0]*t,c.rotationPost[1]=e.rotationPost[1]*t,c.rotationPost[2]=e.rotationPost[2]*t),r&&(c.scale[0]=1+e.scale[0]*t,c.scale[1]=1+e.scale[1]*t),l&&(c.skew[0]=e.skew[0]*t,c.skew[1]=e.skew[1]*t)},updateElement:function(t){B(t,c.asMatrix()),L(t,c.getProperties())},getCurrentState:function(){return c},completed:function(){return i.equilibrium||a},restart:function(){i=C(t)}}},C=function(t){var e=D(t.startPosition,0),i=D(t.equilibriumPosition,1),a=D(t.initialVelocity,0),n=D(t.springConstant,.8),o=D(t.springDeceleration,.9),s=D(t.springMass,10),r=!1;return{tick:function(t){if(0!==t&&!r){e+=a+=-(e-i)*n/s,a*=o,Math.abs(e-i)<.001&&Math.abs(a)<.001&&(r=!0)}},resetFrom:function(t){e=t,a=0},getValue:function(){return r?i:e},completed:function(){return r}}},S={linear:function(t){return t},ease:function(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2},easeIn:function(t){return t*t},easeOut:function(t){return 1-Math.pow(t-1,2)}},E=function(t,e){if("spring"==t)return C(e);var i=t;N(t)||(i=S[t]);var a,n=i,o=0;return{tick:function(t){o=n(t),a=t},resetFrom:function(t){a=0},getValue:function(){return o},completed:function(){return a>=1&&a}}},A=function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},T=function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]},I=function(){var t=new Float32Array(16),e=new Float32Array(16),i=new Float32Array(16);return A(t),{data:t,asCSS:function(){for(var e="matrix3d(",i=0;i<15;++i)Math.abs(t[i])<1e-4?e+="0,":e+=t[i].toFixed(10)+",";return Math.abs(t[15])<1e-4?e+="0)":e+=t[15].toFixed(10)+")",e},clear:function(){A(t)},translate:function(a,n,o){T(t,e),r=a,l=n,c=o,(s=i)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=r,s[13]=l,s[14]=c,s[15]=1;var s,r,l,c;return R(e,i,t),this},rotateX:function(a){T(t,e),o=a,(n=i)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=Math.cos(o),n[6]=-Math.sin(o),n[7]=0,n[8]=0,n[9]=Math.sin(o),n[10]=Math.cos(o),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1;var n,o;return R(e,i,t),this},rotateY:function(a){T(t,e),o=a,(n=i)[0]=Math.cos(o),n[1]=0,n[2]=Math.sin(o),n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=-Math.sin(o),n[9]=0,n[10]=Math.cos(o),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1;var n,o;return R(e,i,t),this},rotateZ:function(a){T(t,e),o=a,(n=i)[0]=Math.cos(o),n[1]=-Math.sin(o),n[2]=0,n[3]=0,n[4]=Math.sin(o),n[5]=Math.cos(o),n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1;var n,o;return R(e,i,t),this},scale:function(a,n){T(t,e),s=a,r=n,(o=i)[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1;var o,s,r;return R(e,i,t),this},skew:function(a,n){T(t,e),s=a,r=n,(o=i)[0]=1,o[1]=Math.tan(s),o[2]=0,o[3]=0,o[4]=Math.tan(r),o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1;var o,s,r;return R(e,i,t),this}}},R=function(t,e,i){return i[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],i[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],i[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],i[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],i[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],i[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],i[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],i[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],i[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],i[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],i[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],i[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],i[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],i[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],i[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],i[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],i},O=function t(e){var i=I(),a={opacity:void 0,width:void 0,height:void 0};return{position:e.position,rotation:e.rotation,rotationPost:e.rotationPost,skew:e.skew,scale:e.scale,scalePost:e.scalePost,opacity:e.opacity,width:e.width,height:e.height,clone:function(){return t({position:this.position?this.position.slice(0):void 0,rotation:this.rotation?this.rotation.slice(0):void 0,rotationPost:this.rotationPost?this.rotationPost.slice(0):void 0,skew:this.skew?this.skew.slice(0):void 0,scale:this.scale?this.scale.slice(0):void 0,scalePost:this.scalePost?this.scalePost.slice(0):void 0,height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var t=i;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return a.opacity=this.opacity,a.width=this.width+"px",a.height=this.height+"px",a}}},$=function(t,e,i){var a=t,n=e,o=i,s=void 0!==n.position,r=void 0!==n.rotation,l=void 0!==n.rotationPost,c=void 0!==n.scale,h=void 0!==n.skew,u=void 0!==n.width,d=void 0!==n.height,p=void 0!==n.opacity;return{tween:function(t){if(s){var e=n.position[0]-a.position[0],i=n.position[1]-a.position[1],v=n.position[2]-a.position[2];o.position[0]=a.position[0]+t*e,o.position[1]=a.position[1]+t*i,o.position[2]=a.position[2]+t*v}if(r){var f=n.rotation[0]-a.rotation[0],m=n.rotation[1]-a.rotation[1],_=n.rotation[2]-a.rotation[2];o.rotation[0]=a.rotation[0]+t*f,o.rotation[1]=a.rotation[1]+t*m,o.rotation[2]=a.rotation[2]+t*_}if(l){var g=n.rotationPost[0]-a.rotationPost[0],y=n.rotationPost[1]-a.rotationPost[1],w=n.rotationPost[2]-a.rotationPost[2];o.rotationPost[0]=a.rotationPost[0]+t*g,o.rotationPost[1]=a.rotationPost[1]+t*y,o.rotationPost[2]=a.rotationPost[2]+t*w}if(h){var b=n.scale[0]-a.scale[0],x=n.scale[1]-a.scale[1];o.scale[0]=a.scale[0]+t*b,o.scale[1]=a.scale[1]+t*x}if(c){var k=n.skew[0]-a.skew[0],C=n.skew[1]-a.skew[1];o.skew[0]=a.skew[0]+t*k,o.skew[1]=a.skew[1]+t*C}if(u){var S=n.width-a.width;o.width=a.width+t*S}if(d){var E=n.height-a.height;o.height=a.height+t*E}if(p){var A=n.opacity-a.opacity;o.opacity=a.opacity+t*A}},asMatrix:function(){return o.asMatrix()},getProperties:function(){return o.getProperties()},setReverse:function(){var t=a;a=n,n=t}}},P=function(t,e,i,a){var n=t(0,I()),o=e,s=i,r=a,l=!1;return{tween:function(e){l&&(e=1-e),n.clear(),n=t(e,n);var i=s.width-o.width,a=s.height-o.height,c=s.opacity-o.opacity;void 0!==s.width&&(r.width=o.width+e*i),void 0!==s.height&&(r.height=o.height+e*a),void 0!==s.opacity&&(r.opacity=o.opacity+e*c)},asMatrix:function(){return n},getProperties:function(){return r.getProperties()},setReverse:function(){l=!0}}},D=function(t,e){return void 0===t?e:t},B=function(t,e,i){var n="";i&&(n="perspective("+i+"px) ");var o=e.asCSS();t.style[a]=n+o},L=function(t,e){for(var i in e)t.style[i]=e[i]},N=function(t){return"function"==typeof t},M=function(t){if(!t)return t;var e={};for(var i in t)e[i]=t[i];return e};return o.createMatrix=I,o.setElementTransform=B,o}(),l=function(){var t=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}return function(a,n,o,s,r,l){if(!(isNaN(l)||l<1)){l|=0;var c=function(t,e,i,a,n){if("string"==typeof t)t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var o,s=t.getContext("2d");try{try{o=s.getImageData(e,i,a,n)}catch(t){throw new Error("unable to access local image data: "+t)}}catch(t){throw new Error("unable to access image data: "+t)}return o}(a,n,o,s,r);c=function(a,n,o,s,r,l){var c,h,u,d,p,v,f,m,_,g,y,w,b,x,k,C,S,E,A,T,I,R,O,$,P=a.data,D=l+l+1,B=s-1,L=r-1,N=l+1,M=N*(N+1)/2,H=new i,z=H;for(u=1;u<D;u++)if(z=z.next=new i,u==N)var F=z;z.next=H;var U=null,q=null;f=v=0;var W=t[l],V=e[l];for(h=0;h<r;h++){for(C=S=E=A=m=_=g=y=0,w=N*(T=P[v]),b=N*(I=P[v+1]),x=N*(R=P[v+2]),k=N*(O=P[v+3]),m+=M*T,_+=M*I,g+=M*R,y+=M*O,z=H,u=0;u<N;u++)z.r=T,z.g=I,z.b=R,z.a=O,z=z.next;for(u=1;u<N;u++)d=v+((B<u?B:u)<<2),m+=(z.r=T=P[d])*($=N-u),_+=(z.g=I=P[d+1])*$,g+=(z.b=R=P[d+2])*$,y+=(z.a=O=P[d+3])*$,C+=T,S+=I,E+=R,A+=O,z=z.next;for(U=H,q=F,c=0;c<s;c++)P[v+3]=O=y*W>>V,0!=O?(O=255/O,P[v]=(m*W>>V)*O,P[v+1]=(_*W>>V)*O,P[v+2]=(g*W>>V)*O):P[v]=P[v+1]=P[v+2]=0,m-=w,_-=b,g-=x,y-=k,w-=U.r,b-=U.g,x-=U.b,k-=U.a,d=f+((d=c+l+1)<B?d:B)<<2,C+=U.r=P[d],S+=U.g=P[d+1],E+=U.b=P[d+2],A+=U.a=P[d+3],m+=C,_+=S,g+=E,y+=A,U=U.next,w+=T=q.r,b+=I=q.g,x+=R=q.b,k+=O=q.a,C-=T,S-=I,E-=R,A-=O,q=q.next,v+=4;f+=s}for(c=0;c<s;c++){for(S=E=A=C=_=g=y=m=0,w=N*(T=P[v=c<<2]),b=N*(I=P[v+1]),x=N*(R=P[v+2]),k=N*(O=P[v+3]),m+=M*T,_+=M*I,g+=M*R,y+=M*O,z=H,u=0;u<N;u++)z.r=T,z.g=I,z.b=R,z.a=O,z=z.next;for(p=s,u=1;u<=l;u++)v=p+c<<2,m+=(z.r=T=P[v])*($=N-u),_+=(z.g=I=P[v+1])*$,g+=(z.b=R=P[v+2])*$,y+=(z.a=O=P[v+3])*$,C+=T,S+=I,E+=R,A+=O,z=z.next,u<L&&(p+=s);for(v=c,U=H,q=F,h=0;h<r;h++)P[3+(d=v<<2)]=O=y*W>>V,O>0?(O=255/O,P[d]=(m*W>>V)*O,P[d+1]=(_*W>>V)*O,P[d+2]=(g*W>>V)*O):P[d]=P[d+1]=P[d+2]=0,m-=w,_-=b,g-=x,y-=k,w-=U.r,b-=U.g,x-=U.b,k-=U.a,d=c+((d=h+N)<L?d:L)*s<<2,m+=C+=U.r=P[d],_+=S+=U.g=P[d+1],g+=E+=U.b=P[d+2],y+=A+=U.a=P[d+3],U=U.next,w+=T=q.r,b+=I=q.g,x+=R=q.b,k+=O=q.a,C-=T,S-=I,E-=R,A-=O,q=q.next,v+=s}return a}(c,0,0,s,r,l),a.getContext("2d").putImageData(c,n,o)}}}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var a=atob(this.toDataURL(e,i).split(",")[1]),n=a.length,o=new Uint8Array(n),s=0;s<n;s++)o[s]=a.charCodeAt(s);t(new Blob([o],{type:e||"image/png"}))}});var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),B()(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),h="function"==typeof P.a&&"symbol"===O()(I.a)?function(t){return void 0===t?"undefined":O()(t)}:function(t){return t&&"function"==typeof P.a&&t.constructor===P.a&&t!==P.a.prototype?"symbol":void 0===t?"undefined":O()(t)};function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(t){return t.replace(/\-./g,function(t){return t.charAt(1).toUpperCase()})},p=function(t){for(var e=[],i=Array.prototype.slice.call(t.attributes),a=i.length,n=0;n<a;n++)e.push({name:i[n].name,value:i[n].value});return e},v=function(t){return{x:void 0===t.offsetX?t.layerX:t.offsetX,y:void 0===t.offsetY?t.layerY:t.offsetY}},f=function(t,e){var i,a={},n=e||{};for(i in t)t.hasOwnProperty(i)&&(a[i]=void 0===n[i]?t[i]:n[i]);return a},m=27,_=13,g=["touchstart","pointerdown","mousedown"],y=["touchmove","pointermove","mousemove"],w=["touchend","touchcancel","pointerup","mouseup"],b={jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"},x=/(\.png|\.bmp|\.gif|\.jpg|\.jpe|\.jpg|\.jpeg)$/,k=function(t,e){var i=document.createElement(t);return e&&(i.className=e),i},C=function(t,e,i){e.forEach(function(e){t.addEventListener(e,i,!1)})},S=function(t,e,i){e.forEach(function(e){t.removeEventListener(e,i,!1)})},E=function(t){var e=function(t){var e=t.changedTouches?t.changedTouches[0]:t;if(e)return{x:e.pageX,y:e.pageY}}(t);return e.x-=window.pageXOffset||document.documentElement.scrollLeft,e.y-=window.pageYOffset||document.documentElement.scrollTop,e},A=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},T=function(t){return t[t.length-1]},R=function(t,e,i){return Math.max(e,Math.min(i,t))},$=function(t,e){if(!e)return!1;for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},D=function(t){t&&(t.style.webkitTransform="",t.style.transform="")},L=function(t){var e=void 0;for(e in b)if(b.hasOwnProperty(e)&&b[e]===t)return e;return t},N=function(t){return t.split("/").pop().split("?").shift()},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e+t).slice(-e.length)},H=function(t){return t.getFullYear()+"-"+M(t.getMonth()+1,"00")+"-"+M(t.getDate(),"00")+"_"+M(t.getHours(),"00")+"-"+M(t.getMinutes(),"00")+"-"+M(t.getSeconds(),"00")},z=function(t){return t.type||"image/jpeg"},F=function(t){if("string"!=typeof t)return H(new Date);return N(t).split(".").shift()},U=function(t,e){return"lastModified"in File.prototype?t.lastModified=new Date:t.lastModifiedDate=new Date,t.name=e,t},q=function(t){return/^data:image/.test(t)},W=function(t,e,i){var a=new XMLHttpRequest;a.open("GET",t,!0),e(a),a.responseType="blob",a.onload=function(e){var a=N(t),n=function(t){var e=void 0;for(e in b)if(b.hasOwnProperty(e)&&-1!==t.indexOf(b[e]))return b[e];return null}(this.response.type);x.test(a)||(a+="."+L(n));var o=U(this.response,a);i(et(o,n))},a.send()},V=function(t){var e=t.split(",")[1].replace(/\s/g,"");return atob(e)},j=function(t,e){for(var i=V(t),a=new ArrayBuffer(i.length),n=new Uint8Array(a),o=0;o<i.length;o++)n[o]=i.charCodeAt(o);var s=at(t);return void 0===e&&(e=H(new Date)+"."+L(s)),U(G(a,s),e)},G=function(t,e){var i=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(i){var a=new i;return a.append(t),a.getBlob(e)}return new Blob([t],{type:e})},X=function(t,e,i){var a,n,o,s;return e/t<i?(a=.5*(t-(o=(s=e)/i)),n=0):(a=0,n=.5*(e-(s=(o=t)*i))),{x:a,y:n,height:s,width:o}};function Q(t,e,i,a){if(!(e>=1)){for(var n=t.width,o=t.height,s=Math.max(a.width,Math.min(i.width,Math.round(t.width*e))),r=Math.max(a.height,Math.min(i.height,Math.round(t.height*e))),l=Z(t),c=void 0;n>s&&o>r;)c=document.createElement("canvas"),n=Math.round(.5*l.width),o=Math.round(.5*l.height),n<s&&(n=s),o<r&&(o=r),c.width=n,c.height=o,c.getContext("2d").drawImage(l,0,0,n,o),l=Z(c);t.width=s,t.height=r,t.getContext("2d").drawImage(l,0,0,s,r)}}var K=function(t,e){t.getContext("2d").putImageData(e((i=t).getContext("2d").getImageData(0,0,i.width,i.height),t.width,t.height),0,0);var i},J=function(t){return function(e,i,a){for(var n=[0,-1,0,-1,5,-1,0,-1,0],o=Math.round(Math.sqrt(n.length)),s=.5*o|0,r=function(t,e,i){var a=document.createElement("canvas");a.width=t,a.height=e;var n=a.getContext("2d").createImageData(a.width,a.height);return i&&n.set(i.data),n}(i,a),l=r.data,c=e.data,h=a,u=void 0;h--;)for(u=i;u--;){for(var d=h,p=u,v=4*(h*i+u),f=0,m=0,_=0,g=0;g<o;g++)for(var y=0;y<o;y++){var w=d+g-s,b=p+y-s;if(w>=0&&w<a&&b>=0&&b<i){var x=4*(w*i+b),k=n[g*o+y];f+=c[x]*k,m+=c[x+1]*k,_+=c[x+2]*k,c[x+3]*k}}l[v]=f*t+c[v]*(1-t),l[v+1]=m*t+c[v+1]*(1-t),l[v+2]=_*t+c[v+2]*(1-t),l[v+3]=c[v+3]}return r}},Z=function(t){return Y(t,1)},Y=function(t,e){if(!t)return null;var i=document.createElement("canvas"),a=i.getContext("2d");return i.width=t.width,i.height=t.height,a.drawImage(t,0,0),e>0&&1!==e&&Q(i,e,{width:Math.round(t.width*e),height:Math.round(t.height*e)},{width:0,height:0}),i},tt=function(t){return"object"===("undefined"==typeof value?"undefined":h(value))&&null!==value?JSON.parse(s()(t)):t},et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;var i=t.slice(0,t.size,e||t.type);return i.name=t.name,"lastModified"in File.prototype&&t.lastModified?i.lastModified=new Date(t.lastModified):t.lastModifiedDate&&(i.lastModifiedDate=new Date(t.lastModifiedDate)),i},it=function(t,e,i){return t&&e?t.toDataURL(e,"image/jpeg"===e&&"number"==typeof i?i/100:void 0):null},at=function(t){if(!t)return null;var e=t.substr(0,16).match(/^.+;/);return e.length?e[0].substring(5,e[0].length-1):null},nt=function(t){return Array.prototype.slice.call(t)},ot=function(t){t.parentNode.removeChild(t)},st=function(t){var e=k("div");return t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t),e},rt=function(t,e,i,a){var n=(a-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}},lt=function(t,e,i,a){return function(t,e,i,a,n){var o=rt(t,e,i,n),s=rt(t,e,i,a),r=n-a<=180?"0":"1";return["M",o.x,o.y,"A",i,i,0,r,0,s.x,s.y].join(" ")}(t,e,i,0,360*a)},ct=function(){var t={n:function(t,e,i,a){var n,o,s,r,l,c,h;return(s=t.y+t.height)-(n=R(e.y,0,s))<i.min.height&&(n=s-i.min.height),(l=a?(s-n)/a:t.width)<i.min.width&&(n=s-(l=i.min.width)*a),c=.5*(l-t.width),r=t.x-c,o=t.x+t.width+c,(r<0||o>i.width)&&(h=Math.min(t.x,i.width-(t.x+t.width)),r=t.x-h,n=s-(l=(o=t.x+t.width+h)-r)*a),{x:r,y:n,width:o-r,height:s-n}},s:function(t,e,i,a){var n,o,s,r,l,c,h;return n=t.y,(s=R(e.y,n,i.height))-n<i.min.height&&(s=n+i.min.height),(l=a?(s-n)/a:t.width)<i.min.width&&(s=n+(l=i.min.width)*a),c=.5*(l-t.width),r=t.x-c,o=t.x+t.width+c,(r<0||o>i.width)&&(h=Math.min(t.x,i.width-(t.x+t.width)),r=t.x-h,s=n+(l=(o=t.x+t.width+h)-r)*a),{x:r,y:n,width:o-r,height:s-n}},e:function(t,e,i,a){var n,o,s,r,l,c,h;return r=t.x,(o=R(e.x,r,i.width))-r<i.min.width&&(o=r+i.min.width),(l=a?(o-r)*a:t.height)<i.min.height&&(o=r+(l=i.min.height)/a),c=.5*(l-t.height),n=t.y-c,s=t.y+t.height+c,(n<0||s>i.height)&&(h=Math.min(t.y,i.height-(t.y+t.height)),n=t.y-h,o=r+(l=(s=t.y+t.height+h)-n)/a),{x:r,y:n,width:o-r,height:s-n}},w:function(t,e,i,a){var n,o,s,r,l,c,h,u;return(o=t.x+t.width)-(r=R(e.x,0,o))<i.min.width&&(r=o-i.min.width),(c=a?(o-r)*a:t.height)<i.min.height&&(r=o-(c=i.min.height)/a),h=.5*(c-t.height),n=t.y-h,s=t.y+t.height+h,(n<0||s>i.height)&&(u=Math.min(t.y,i.height-(t.y+t.height)),n=t.y-u,l=(c=(s=t.y+t.height+u)-n)/a,r=o-l),{x:r,y:n,width:o-r,height:s-n}},ne:function(t,e,i,a){var n,o,s,r,l,c;return r=t.x,s=t.y+t.height,(o=R(e.x,r,i.width))-r<i.min.width&&(o=r+i.min.width),(l=a?(o-r)*a:R(s-e.y,i.min.height,s))<i.min.height&&(o=r+(l=i.min.height)/a),((n=t.y-(l-t.height))<0||s>i.height)&&(c=Math.min(t.y,i.height-(t.y+t.height)),o=r+(l=s-(n=t.y-c))/a),{x:r,y:n,width:o-r,height:s-n}},se:function(t,e,i,a){var n,o,s,r,l,c;return r=t.x,n=t.y,(o=R(e.x,r,i.width))-r<i.min.width&&(o=r+i.min.width),(l=a?(o-r)*a:R(e.y-t.y,i.min.height,i.height-n))<i.min.height&&(o=r+(l=i.min.height)/a),s=t.y+t.height+(l-t.height),(n<0||s>i.height)&&(c=Math.min(t.y,i.height-(t.y+t.height)),o=r+(l=(s=t.y+t.height+c)-n)/a),{x:r,y:n,width:o-r,height:s-n}},sw:function(t,e,i,a){var n,o,s,r,l,c;return o=t.x+t.width,n=t.y,o-(r=R(e.x,0,o))<i.min.width&&(r=o-i.min.width),(l=a?(o-r)*a:R(e.y-t.y,i.min.height,i.height-n))<i.min.height&&(r=o-(l=i.min.height)/a),s=t.y+t.height+(l-t.height),(n<0||s>i.height)&&(c=Math.min(t.y,i.height-(t.y+t.height)),r=o-(l=(s=t.y+t.height+c)-n)/a),{x:r,y:n,width:o-r,height:s-n}},nw:function(t,e,i,a){var n,o,s,r,l,c;return o=t.x+t.width,s=t.y+t.height,o-(r=R(e.x,0,o))<i.min.width&&(r=o-i.min.width),(l=a?(o-r)*a:R(s-e.y,i.min.height,s))<i.min.height&&(r=o-(l=i.min.height)/a),((n=t.y-(l-t.height))<0||s>i.height)&&(c=Math.min(t.y,i.height-(t.y+t.height)),r=o-(l=s-(n=t.y-c))/a),{x:r,y:n,width:o-r,height:s-n}}};return function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");u(this,e),this._element=t,this._interaction=null,this._minWidth=0,this._minHeight=0,this._ratio=null,this._rect={x:0,y:0,width:0,height:0},this._space={width:0,height:0},this._rectChanged=!1,this._init()}return c(e,[{key:"_init",value:function(){this._element.className="slim-crop-area";var e=k("div","grid");this._element.appendChild(e);for(var i in t)if(t.hasOwnProperty(i)){var a=k("button",i);this._element.appendChild(a)}var n=k("button","c");this._element.appendChild(n),C(document,g,this)}},{key:"reset",value:function(){this._interaction=null,this._rect={x:0,y:0,width:0,height:0},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"rescale",value:function(t){1!==t&&(this._interaction=null,this._rectChanged=!0,this._rect.x*=t,this._rect.y*=t,this._rect.width*=t,this._rect.height*=t,this._redraw(),this._element.dispatchEvent(new CustomEvent("change")))}},{key:"limit",value:function(t,e){this._space.width=t,this._space.height=e}},{key:"offset",value:function(t,e){this._space.x=t,this._space.y=e}},{key:"resize",value:function(t,e,i,a){this._interaction=null,this._rect={x:R(t,0,this._space.width-this._minWidth),y:R(e,0,this._space.height-this._minHeight),width:R(i,this._minWidth,this._space.width),height:R(a,this._minHeight,this._space.height)},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":case"pointerdown":case"mousedown":this._onStartDrag(t);break;case"touchmove":case"pointermove":case"mousemove":this._onDrag(t);break;case"touchend":case"touchcancel":case"pointerup":case"mouseup":this._onStopDrag(t)}}},{key:"_onStartDrag",value:function(t){this._element.contains(t.target)&&(t.preventDefault(),C(document,y,this),C(document,w,this),this._interaction={type:t.target.className,offset:E(t)},this._interaction.offset.x-=this._rect.x,this._interaction.offset.y-=this._rect.y,this._element.setAttribute("data-dragging","true"),this._redraw())}},{key:"_onDrag",value:function(e){e.preventDefault();var i=E(e),a=this._interaction.type;"c"===a?(this._rect.x=R(i.x-this._interaction.offset.x,0,this._space.width-this._rect.width),this._rect.y=R(i.y-this._interaction.offset.y,0,this._space.height-this._rect.height)):t[a]&&(this._rect=t[a](this._rect,{x:i.x-this._space.x,y:i.y-this._space.y},{x:0,y:0,width:this._space.width,height:this._space.height,min:{width:this._minWidth,height:this._minHeight}},this._ratio)),this._rectChanged=!0,this._element.dispatchEvent(new CustomEvent("input"))}},{key:"_onStopDrag",value:function(t){t.preventDefault(),S(document,y,this),S(document,w,this),this._interaction=null,this._element.setAttribute("data-dragging","false"),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"_redraw",value:function(){var t=this;if(this._rectChanged){var e="translate("+this._rect.x+"px,"+this._rect.y+"px);";this._element.style.cssText="\n\t\t\t\t\t-webkit-transform: "+e+";\n\t\t\t\t\ttransform: "+e+";\n\t\t\t\t\twidth:"+this._rect.width+"px;\n\t\t\t\t\theight:"+this._rect.height+"px;\n\t\t\t\t",this._rectChanged=!1}this._interaction&&requestAnimationFrame(function(){return t._redraw()})}},{key:"destroy",value:function(){this._interaction=!1,this._rectChanged=!1,S(document,g,this),S(document,y,this),S(document,w,this),ot(this._element)}},{key:"element",get:function(){return this._element}},{key:"space",get:function(){return this._space}},{key:"area",get:function(){return{x:this._rect.x/this._space.width,y:this._rect.y/this._space.height,width:this._rect.width/this._space.width,height:this._rect.height/this._space.height}}},{key:"dirty",get:function(){return 0!==this._rect.x||0!==this._rect.y||0!==this._rect.width||0!==this._rect.height}},{key:"minWidth",set:function(t){this._minWidth=t}},{key:"minHeight",set:function(t){this._minHeight=t}},{key:"ratio",set:function(t){this._ratio=t}}]),e}()}(),ht=function(){var t=["input","change"],e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div"),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),this._element=t,this._options=f(e.options(),i),this._ratio=null,this._output=null,this._input=null,this._preview=null,this._previewBlurred=null,this._blurredPreview=!1,this._cropper=null,this._straightCrop=null,this._previewWrapper=null,this._currentWindowSize={},this._btnGroup=null,this._maskFrame=null,this._dirty=!1,this._wrapperRotation=0,this._wrapperScale=1,this._init()}return c(e,[{key:"_init",value:function(){var i=this;this._element.className="slim-image-editor",this._container=k("div","slim-container"),this._wrapper=k("div","slim-wrapper"),this._stage=k("div","slim-stage"),this._container.appendChild(this._stage),this._cropper=new ct,t.forEach(function(t){i._cropper.element.addEventListener(t,i)}),this._stage.appendChild(this._cropper.element),this._previewWrapper=k("div","slim-image-editor-preview slim-crop-preview"),this._previewBlurred=k("canvas","slim-crop-blur"),this._previewWrapper.appendChild(this._previewBlurred),this._wrapper.appendChild(this._previewWrapper),this._previewMask=k("div","slim-crop-mask"),this._preview=k("img"),this._previewMask.appendChild(this._preview),this._cropper.element.appendChild(this._previewMask),this._btnGroup=k("div","slim-editor-btn-group"),e.Buttons.forEach(function(t){var e=A(t),a=i._options["button"+e+"Label"],n=i._options["button"+e+"Title"],o=i._options["button"+e+"ClassName"],s=k("button","slim-editor-btn slim-btn-"+t+(o?" "+o:""));s.innerHTML=a,s.title=n||a,s.type="button",s.setAttribute("data-action",t),s.addEventListener("click",i),i._btnGroup.appendChild(s)}),this._utilsGroup=k("div","slim-editor-utils-group");var a=k("button","slim-editor-utils-btn slim-btn-rotate"+(this._options.buttonRotateClassName?" "+this._options.buttonRotateClassName:""));a.setAttribute("data-action","rotate"),a.addEventListener("click",this),a.title=this._options.buttonRotateTitle,this._utilsGroup.appendChild(a),this._container.appendChild(this._wrapper),this._element.appendChild(this._container),this._element.appendChild(this._utilsGroup),this._element.appendChild(this._btnGroup)}},{key:"dirty",value:function(){this._dirty=!0}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onGridChange(t);break;case"input":this._onGridInput(t);break;case"keydown":this._onKeyDown(t);break;case"resize":this._onResize(t)}}},{key:"_onKeyDown",value:function(t){switch(t.keyCode){case _:this._confirm();break;case m:this._cancel()}}},{key:"_onClick",value:function(t){t.target.classList.contains("slim-btn-cancel")&&this._cancel(),t.target.classList.contains("slim-btn-confirm")&&this._confirm(),t.target.classList.contains("slim-btn-rotate")&&this._rotate()}},{key:"_onResize",value:function(){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._redraw(),this._redrawCropper(this._cropper.area),this._updateWrapperScale(),this._redrawWrapper()}},{key:"_redrawWrapper",value:function(){var t=r.createMatrix();t.scale(this._wrapperScale,this._wrapperScale),t.rotateZ(this._wrapperRotation*(Math.PI/180)),r.setElementTransform(this._previewWrapper,t)}},{key:"_onGridInput",value:function(){this._redrawCropMask()}},{key:"_onGridChange",value:function(){this._redrawCropMask()}},{key:"_updateWrapperRotation",value:function(){this._options.minSize.width>this._input.height||this._options.minSize.height>this._input.width?this._wrapperRotation+=180:this._wrapperRotation+=90}},{key:"_updateWrapperScale",value:function(){if(this._wrapperRotation%180!=0){var t=this._container.offsetWidth,e=this._container.offsetHeight,i=this._wrapper.offsetHeight,a=this._wrapper.offsetWidth,n=t/i;n*a>e&&(n=e/a),this._wrapperScale=n}else this._wrapperScale=1}},{key:"_cancel",value:function(){this._element.dispatchEvent(new CustomEvent("cancel"))}},{key:"_confirm",value:function(){var t,e,i,a=this._wrapperRotation%180!=0,n=this._cropper.area,o=(t=n,e=a?this._input.height:this._input.width,i=a?this._input.width:this._input.height,{x:t.x*e,y:t.y*i,width:t.width*e,height:t.height*i});this._element.dispatchEvent(new CustomEvent("confirm",{detail:{rotation:this._wrapperRotation%360,crop:o}}))}},{key:"_rotate",value:function(){var t=this;this._updateWrapperRotation();var e=1===this.ratio||null===this._ratio?this._cropper.area:null;e&&function(t,e){var i=Math.PI/180*e,a=Math.cos(i),n=Math.sin(i),o=t.x,s=t.y,r=t.x+t.width,l=t.y+t.height,c=a*(o-.5)+n*(s-.5)+.5,h=a*(s-.5)-n*(o-.5)+.5,u=a*(r-.5)+n*(l-.5)+.5,d=a*(l-.5)-n*(r-.5)+.5;c<=u?(t.x=c,t.width=u-c):(t.x=u,t.width=c-u),h<=d?(t.y=h,t.height=d-h):(t.y=d,t.height=h-d)}(e,90),this._updateWrapperScale(),this._hideCropper(),r(this._previewWrapper,{rotation:[0,0,this._wrapperRotation*(Math.PI/180)],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.8,springDeceleration:.65,complete:function(){t._redrawCropper(e),t._showCropper()}})}},{key:"_showCropper",value:function(){r(this._stage,{easing:"ease",duration:250,fromOpacity:0,opacity:1})}},{key:"_hideCropper",value:function(){r(this._stage,{duration:0,fromOpacity:0,opacity:0})}},{key:"_redrawCropMask",value:function(){var t=this,e=this._wrapperRotation%360,i=this._wrapperScale,a=this._wrapper.offsetWidth,n=this._wrapper.offsetHeight,o=this._cropper.area,s={x:0,y:0};0===e?(s.x=-o.x,s.y=-o.y):90===e?(s.x=-(1-o.y),s.y=-o.x):180===e?(s.x=-(1-o.x),s.y=-(1-o.y)):270===e&&(s.x=-o.y,s.y=-(1-o.x)),s.x*=a,s.y*=n,cancelAnimationFrame(this._maskFrame),this._maskFrame=requestAnimationFrame(function(){var a="scale("+i+") rotate("+-e+"deg) translate("+s.x+"px, "+s.y+"px);";t._preview.style.cssText="\n\t\t\t\t\twidth: "+t._previewSize.width+"px;\n\t\t\t\t\theight: "+t._previewSize.height+"px;\n\t\t\t\t\t-webkit-transform: "+a+";\n\t\t\t\t\ttransform: "+a+";\n\t\t\t\t"})}},{key:"open",value:function(t,e,i,a,n){var o=this;if(!this._input||this._dirty||this._ratio!==e){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._dirty=!1,this._wrapperRotation=a||0,this._blurredPreview=!1,this._ratio=e,this._previewSize=null,this._element.style.opacity="0",this._input=t;var s,r,l,c=a%180!=0,h=(s=i,r=c?t.height:t.width,l=c?t.width:t.height,{x:s.x/r,y:s.y/l,width:s.width/r,height:s.height/l});this._preview.onload=function(){o._preview.onload=null,o._cropper.ratio=o.ratio,o._redraw(),o._redrawCropper(h),n(),o._element.style.opacity=""},this._preview.src="",this._preview.src=Y(this._input,Math.min(this._container.offsetWidth/this._input.width,this._container.offsetHeight/this._input.height)).toDataURL()}else n()}},{key:"_redrawCropper",value:function(t){var e=this._wrapperRotation%180!=0,i=e?this._input.height/this._input.width:this._input.width/this._input.height,a=this._wrapper.offsetWidth,n=this._wrapper.offsetHeight,o=this._container.offsetWidth,s=this._container.offsetHeight;this._updateWrapperScale();var r=this._wrapperScale*(e?n:a),l=this._wrapperScale*(e?a:n),c=e?.5*(o-r):this._wrapper.offsetLeft,h=e?.5*(s-l):this._wrapper.offsetTop;this._stage.style.cssText="\n\t\t\t\tleft:"+c+"px;\n\t\t\t\ttop:"+h+"px;\n\t\t\t\twidth:"+r+"px;\n\t\t\t\theight:"+l+"px;\n\t\t\t",this._cropper.limit(r,r/i),this._cropper.offset(c+this._element.offsetLeft,h+this._element.offsetTop),this._cropper.minWidth=this._wrapperScale*this._options.minSize.width*this.scalar,this._cropper.minHeight=this._wrapperScale*this._options.minSize.height*this.scalar;var u=null;u=t?{x:t.x*r,y:t.y*l,width:t.width*r,height:t.height*l}:X(r,l,this._ratio||l/r),this._cropper.resize(u.x,u.y,u.width,u.height)}},{key:"_redraw",value:function(){var t=this._input.height/this._input.width,e=this._container.clientWidth,i=this._container.clientHeight,a=e,n=a*t;n>i&&(a=(n=i)/t);var o=(e-(a=Math.round(a)))/2,s=(i-(n=Math.round(n)))/2;this._wrapper.style.cssText="\n\t\t\t\tleft:"+o+"px;\n\t\t\t\ttop:"+s+"px;\n\t\t\t\twidth:"+a+"px;\n\t\t\t\theight:"+n+"px;\n\t\t\t",this._previewBlurred.style.cssText="\n\t\t\t\twidth:"+a+"px;\n\t\t\t\theight:"+n+"px;\n\t\t\t",this._preview.style.cssText="\n\t\t\t\twidth:"+a+"px;\n\t\t\t\theight:"+n+"px;\n\t\t\t",this._previewSize={width:a,height:n},this._blurredPreview||(this._previewBlurred.width=300,this._previewBlurred.height=this._previewBlurred.width*t,function(t,e){var i=e.getContext("2d");(a=e).width&&a.height?i.drawImage(t,0,0,e.width,e.height):(e.width=t.width,e.height=t.height,i.drawImage(t,0,0));var a}(this._input,this._previewBlurred),r=this._previewBlurred,l(r,0,0,r.width,r.height,3),this._blurredPreview=!0);var r}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._currentWindowSize.width===window.innerWidth&&this._currentWindowSize.height===window.innerHeight||(this._redraw(),this._redrawCropper(this._cropper.area)),document.addEventListener("keydown",this),window.addEventListener("resize",this);var e=this._wrapperRotation*(Math.PI/180);r(this._previewWrapper,{fromRotation:[0,0,e],rotation:[0,0,e],fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,fromScale:[this._wrapperScale-.02,this._wrapperScale-.02],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.3,springDeceleration:.85,delay:450,complete:function(){}}),this._cropper.dirty?r(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:850,complete:function(){D(this),t()}}):r(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:1e3,complete:function(){D(this)}}),r(this._btnGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,delay:function(t){return 1e3+100*t},easing:"spring",springConstant:.3,springDeceleration:.85,complete:function(){D(this)}}),r(this._utilsGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.85,delay:1250,complete:function(){D(this)}})}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};document.removeEventListener("keydown",this),window.removeEventListener("resize",this),r(this._utilsGroup.childNodes,{fromOpacity:1,opacity:0,duration:250}),r(this._btnGroup.childNodes,{fromOpacity:1,opacity:0,delay:200,duration:350}),r([this._stage,this._previewWrapper],{fromPosition:[0,0,0],position:[0,-250,0],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,delay:250,allDone:function(){t()}})}},{key:"destroy",value:function(){var e=this;nt(this._btnGroup.children).forEach(function(t){t.removeEventListener("click",e)}),t.forEach(function(t){e._cropper.element.removeEventListener(t,e)}),this._cropper.destroy(),this._element.parentNode&&ot(this._element)}},{key:"showRotateButton",set:function(t){t?this._element.classList.remove("slim-rotation-disabled"):this._element.classList.add("slim-rotation-disabled")}},{key:"element",get:function(){return this._element}},{key:"ratio",get:function(){return"input"===this._ratio?this._input.height/this._input.width:this._ratio}},{key:"offset",get:function(){return this._element.getBoundingClientRect()}},{key:"original",get:function(){return this._input}},{key:"scalar",get:function(){return this._previewSize.width/this._input.width}}],[{key:"options",value:function(){return{buttonCancelClassName:null,buttonConfirmClassName:null,buttonCancelLabel:"Cancel",buttonConfirmLabel:"Confirm",buttonCancelTitle:null,buttonConfirmTitle:null,buttonRotateTitle:"Rotate",buttonRotateClassName:null,minSize:{width:0,height:0}}}}]),e}();return e.Buttons=["cancel","confirm"],e}(),ut=function(){var t=["dragenter","dragover","dragleave","drop"];return function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");u(this,e),this._element=t,this._accept=[],this._allowURLs=!1,this._dragPath=null,this._init()}return c(e,[{key:"isValidDataTransfer",value:function(t){return t.files&&t.files.length?this.areValidDataTransferFiles(t.files):t.items&&t.items.length?this.areValidDataTransferItems(t.items):null}},{key:"areValidDataTransferFiles",value:function(t){return!this._accept.length||!t||-1!==this._accept.indexOf(t[0].type)}},{key:"areValidDataTransferItems",value:function(t){return!this._accept.length||!t||(this._allowURLs&&"string"===t[0].kind?null:t[0].type&&0===t[0].type.indexOf("application")?null:-1!==this._accept.indexOf(t[0].type))}},{key:"reset",value:function(){this._element.files=null}},{key:"_init",value:function(){var e=this;this._element.className="slim-file-hopper",t.forEach(function(t){e._element.addEventListener(t,e)})}},{key:"handleEvent",value:function(t){switch(t.type){case"dragenter":case"dragover":this._onDragOver(t);break;case"dragleave":this._onDragLeave(t);break;case"drop":this._onDrop(t)}}},{key:"_onDrop",value:function(t){t.preventDefault();var e=null;if(this._allowURLs){var i=void 0,a=void 0;try{i=t.dataTransfer.getData("url"),a=t.dataTransfer.getData("text/html")}catch(t){}if(a&&a.length){var n=a.match(/src\s*=\s*"(.+?)"/);n&&(e=n[1])}else i&&i.length&&(e=i)}if(e)this._element.files=[{remote:e}];else{if(!this.isValidDataTransfer(t.dataTransfer))return this._element.dispatchEvent(new CustomEvent("file-invalid-drop")),void(this._dragPath=null);this._element.files=t.dataTransfer.files}this._element.dispatchEvent(new CustomEvent("file-drop",{detail:v(t)})),this._element.dispatchEvent(new CustomEvent("change")),this._dragPath=null}},{key:"_onDragOver",value:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.isValidDataTransfer(t.dataTransfer);if(null!==e&&!e)return t.dataTransfer.dropEffect="none",void this._element.dispatchEvent(new CustomEvent("file-invalid"));this._dragPath||(this._dragPath=[]),this._dragPath.push(v(t)),this._element.dispatchEvent(new CustomEvent("file-over",{detail:{x:T(this._dragPath).x,y:T(this._dragPath).y}}))}},{key:"_onDragLeave",value:function(t){this._element.dispatchEvent(new CustomEvent("file-out",{detail:v(t)})),this._dragPath=null}},{key:"destroy",value:function(){var e=this;t.forEach(function(t){e._element.removeEventListener(t,e)}),ot(this._element),this._element=null,this._dragPath=null,this._accept=null}},{key:"element",get:function(){return this._element}},{key:"dragPath",get:function(){return this._dragPath}},{key:"enabled",get:function(){return""===this._element.style.display},set:function(t){this._element.style.display=t?"":"none"}},{key:"allowURLs",set:function(t){this._allowURLs=t}},{key:"accept",set:function(t){this._accept=t},get:function(){return this._accept}}]),e}()}(),dt=function(){function t(){u(this,t),this._element=null,this._inner=null,this._init()}return c(t,[{key:"_init",value:function(){this._element=k("div","slim-popover"),this._element.setAttribute("data-state","off"),document.body.appendChild(this._element)}},{key:"show",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._element.setAttribute("data-state","on"),r(this._element,{fromOpacity:0,opacity:1,duration:350,complete:function(){D(t._element),e()}})}},{key:"hide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};r(this._element,{fromOpacity:1,opacity:0,duration:500,complete:function(){D(t._element),t._element.setAttribute("data-state","off"),e()}})}},{key:"destroy",value:function(){this._element.parentNode&&(this._element.parentNode.removeChild(this._element),this._element=null,this._inner=null)}},{key:"inner",set:function(t){this._inner=t,this._element.firstChild&&this._element.removeChild(this._element.firstChild),this._element.appendChild(this._inner)}},{key:"className",set:function(t){this._element.className="slim-popover"+(null===t?"":" "+t)}}]),t}(),pt=function(t,e){return t.split(e).map(function(t){return parseInt(t,10)})},vt=function(t){return"DIV"===t.nodeName||"SPAN"===t.nodeName},ft="auto",mt="initial",_t="manual",gt=["x","y","width","height"],yt=["file-invalid-drop","file-invalid","file-drop","file-over","file-out","click"],wt=["cancel","confirm"],bt=["remove","edit","download","upload"],xt=null,kt=0,Ct='\n<div class="slim-loader">\n\t<svg>\n\t\t<path class="slim-loader-background" fill="none" stroke-width="3" />\n\t\t<path class="slim-loader-foreground" fill="none" stroke-width="3" />\n\t</svg>\n</div>\n',St='\n<div class="slim-upload-status"></div>\n',Et=function(t){var e=t.split(",");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},At=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),xt||(xt=new dt),this._uid=kt++,this._options=f(e.options(),i),this._options.forceSize&&("string"==typeof this._options.forceSize&&(this._options.forceSize=Et(this._options.forceSize)),this._options.ratio=this._options.forceSize.width+":"+this._options.forceSize.height,this._options.size=tt(this._options.forceSize)),"string"==typeof this._options.size&&(this._options.size=Et(this._options.size)),"string"==typeof this._options.minSize&&(this._options.minSize=Et(this._options.minSize)),this._originalElement=t,this._originalElementInner=t.innerHTML,this._originalElementAttributes=p(t),vt(t)?this._element=t:(this._element=st(t),this._element.className=t.className,t.className="",this._element.setAttribute("data-ratio",this._options.ratio)),this._element.classList.add("slim"),this._element.setAttribute("data-state","init"),this._state=[],this._timers=[],this._input=null,this._inputReference=null,this._output=null,this._ratio=null,this._isRequired=!1,this._imageHopper=null,this._imageEditor=null,this._progressEnabled=!0,this._data={},this._resetData(),this._drip=null,this._hasInitialImage=!1,this._initialCrop=this._options.crop,this._initialRotation=this._options.rotation&&this._options.rotation%90==0?this._options.rotation:null,this._isBeingDestroyed=!1,e.supported?this._init():this._fallback()}return c(e,[{key:"setRotation",value:function(t,e){if("number"==typeof t||t%90==0){this._data.actions.rotation=t;var i=this._data.actions.rotation%180!=0;if(this._data.input.image){var a=i?this._data.input.image.height:this._data.input.image.width,n=i?this._data.input.image.width:this._data.input.image.height;this._data.actions.crop=X(a,n,this._ratio),this._data.actions.crop.type=ft}this._data.input.image&&e&&this._manualTransform(e)}}},{key:"setSize",value:function(t,e){"string"==typeof t&&(t=Et(t)),t&&t.width&&t.height&&(this._options.size=tt(t),this._data.actions.size=tt(t),this._data.input.image&&e&&this._manualTransform(e))}},{key:"setForceSize",value:function(t,e){"string"==typeof t&&(t=Et(t)),t&&t.width&&t.height&&(this._options.size=tt(t),this._options.forceSize=tt(t),this._data.actions.size=tt(t),this.setRatio(this._options.forceSize.width+":"+this._options.forceSize.height,e))}},{key:"setRatio",value:function(t,e){var i=this;if(t&&"string"==typeof t&&(this._options.ratio=t,this._isFixedRatio())){var a=pt(this._options.ratio,":");this._ratio=a[1]/a[0],this._data.input.image&&e?this._cropAuto(function(t){i._scaleDropArea(i._ratio),e&&e(t)}):(this._data.input.image&&(this._data.actions.crop=X(this._data.input.image.width,this._data.input.image.height,this._ratio),this._data.actions.crop.type=ft),this._scaleDropArea(this._ratio),e&&e(null))}}},{key:"isAttachedTo",value:function(t){return this._element===t||this._originalElement===t}},{key:"isDetached",value:function(){return null===this._element.parentNode}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];"function"==typeof e?i=e:(this._options.crop=e.crop,this._options.rotation=e.rotation,this._initialRotation=e.rotation&&e.rotation%90==0?e.rotation:null,this._initialCrop=this._options.crop),this._load(t,i,{blockPush:e.blockPush})}},{key:"upload",value:function(t){this._doUpload(t)}},{key:"download",value:function(){this._doDownload()}},{key:"remove",value:function(){return this._doRemove()}},{key:"destroy",value:function(){this._doDestroy()}},{key:"edit",value:function(){this._doEdit()}},{key:"crop",value:function(t,e){this._crop(t.x,t.y,t.width,t.height,e)}},{key:"containsImage",value:function(){return null!==this._data.input.name}},{key:"_canInstantEdit",value:function(){return this._options.instantEdit&&!this._isInitialising}},{key:"_getFileInput",value:function(){return this._element.querySelector("input[type=file]")}},{key:"_getInitialImage",value:function(){return this._element.querySelector("img")}},{key:"_getInputElement",value:function(){return this._getFileInput()||this._getInitialImage()}},{key:"_getRatioSpacerElement",value:function(){return this._element.children[0]}},{key:"_isImageOnly",value:function(){return"INPUT"!==this._input.nodeName}},{key:"_isFixedRatio",value:function(){return-1!==this._options.ratio.indexOf(":")}},{key:"_isAutoCrop",value:function(){return this._data.actions.crop.type===ft}},{key:"_toggleButton",value:function(t,e){!function(t,e,i){var a=i.querySelector(t);a&&(a.style.display=e?"":"none")}('.slim-btn[data-action="'+t+'"]',e,this._element)}},{key:"_clearState",value:function(){this._state=[],this._updateState()}},{key:"_removeState",value:function(t){this._state=this._state.filter(function(e){return e!==t}),this._updateState()}},{key:"_addState",value:function(t){$(t,this._state)||(this._state.push(t),this._updateState())}},{key:"_updateState",value:function(){this._element&&this._element.setAttribute("data-state",this._state.join(","))}},{key:"_resetData",value:function(){this._data={server:null,meta:tt(this._options.meta),input:{field:this._inputReference,name:null,type:null,width:0,height:0,file:null},output:{image:null,width:0,height:0},actions:{rotation:null,crop:null,size:null}},this._output&&(this._output.value=""),function(t){if(t&&""!==t.value){try{t.value=""}catch(t){}if(t.value){var e=document.createElement("form"),i=t.parentNode,a=t.nextSibling;e.appendChild(t),e.reset(),a?i.insertBefore(t,a):i.appendChild(t)}}}(this._getFileInput())}},{key:"_init",value:function(){var t=this;if(this._isInitialising=!0,this._addState("empty"),$("input",this._options.post)&&(this._inputReference="slim_input_"+this._uid),this._input=this._getInputElement(),this._input||(this._input=k("input"),this._input.type="file",this._element.appendChild(this._input)),this._isRequired=!0===this._input.required,this._output=this._element.querySelector("input[type=hidden]"),this._output){var e=null;try{e=JSON.parse(this._output.value)}catch(t){}if(e){var i=new Image;i.src=e.output.image,i.setAttribute("data-filename",e.output.name),this._element.insertBefore(i,this._element.firstChild)}}else this._output=k("input"),this._output.type="hidden",this._output.name=this._input.name||this._options.defaultInputName,this._element.appendChild(this._output);this._input.removeAttribute("name");var a=k("div","slim-area"),n=this._getInitialImage(),o=(n||{}).src,s=n?n.getAttribute("data-filename"):null;o?this._hasInitialImage=!0:(this._initialCrop=null,this._initialRotation=null);var r='\n\t\t<div class="slim-result">\n\t\t\t<img class="in" style="opacity:0" '+(o?'src="'+o+'"':"")+'><img><img style="opacity:0">\n\t\t</div>';if(this._isImageOnly())a.innerHTML="\n\t\t\t\t"+Ct+"\n\t\t\t\t"+St+"\n\t\t\t\t"+r+'\n\t\t\t\t<div class="slim-status"><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t";else{$("input",this._options.post)&&(this._data.input.field=this._inputReference,this._options.service||(this._input.name=this._inputReference));var l=void 0;this._input.hasAttribute("accept")&&"image/*"!==this._input.getAttribute("accept")?l=this._input.accept.split(",").map(function(t){return t.trim()}).filter(function(t){return t.length>0}):(l=function(){var t=[],e=void 0,i=void 0;for(e in b)b.hasOwnProperty(e)&&(i=b[e],-1==t.indexOf(i)&&t.push(i));return t}(),this._input.setAttribute("accept",l.join(","))),this._imageHopper=new ut,this._imageHopper.accept=l,this._imageHopper.allowURLs="string"==typeof this._options.fetcher,this._element.appendChild(this._imageHopper.element),yt.forEach(function(e){t._imageHopper.element.addEventListener(e,t)}),a.innerHTML="\n\t\t\t\t"+Ct+"\n\t\t\t\t"+St+'\n\t\t\t\t<div class="slim-drip"><span><span></span></span></div>\n\t\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+'</div><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t\t"+r+"\n\t\t\t",this._input.addEventListener("change",this)}if(this._element.appendChild(a),this._btnGroup=k("div","slim-btn-group"),this._btnGroup.style.display="none",this._element.appendChild(this._btnGroup),bt.filter(function(e){return t._isButtonAllowed(e)}).forEach(function(e){var i=A(e),a=t._options["button"+i+"Label"],n=t._options["button"+i+"Title"]||a,o=t._options["button"+i+"ClassName"],s=k("button","slim-btn slim-btn-"+e+(o?" "+o:""));s.innerHTML=a,s.title=n,s.type="button",s.addEventListener("click",t),s.setAttribute("data-action",e),t._btnGroup.appendChild(s)}),this._isFixedRatio()){var c=pt(this._options.ratio,":");this._ratio=c[1]/c[0],this._scaleDropArea(this._ratio)}this._updateProgress(.5),o?this._load(o,function(){t._onInit()},{name:s}):this._onInit()}},{key:"_onInit",value:function(){var t=this;this._isInitialising=!1;var e=function(){var e=setTimeout(function(){t._options.didInit.apply(t,[t.data,t])},0);t._timers.push(e)};this._options.saveInitialImage&&this.containsImage()?this._options.service||this._save(function(){e()},!1):(this._options.service&&this.containsImage()&&this._toggleButton("upload",!1),e())}},{key:"_updateProgress",value:function(t){if(t=Math.min(.99999,t),this._element&&this._progressEnabled){var e=this._element.querySelector(".slim-loader");if(e){var i=e.offsetWidth,a=e.querySelectorAll("path"),n=parseInt(a[0].getAttribute("stroke-width"),10);a[0].setAttribute("d",lt(.5*i,.5*i,.5*i-n,.9999)),a[1].setAttribute("d",lt(.5*i,.5*i,.5*i-n,t))}}}},{key:"_startProgress",value:function(t){var e=this;if(this._element){this._progressEnabled=!1;var i=this._element.querySelector(".slim-loader");if(i){var a=i.children[0];this._stopProgressLoop(function(){i.removeAttribute("style"),a.removeAttribute("style"),e._progressEnabled=!0,e._updateProgress(0),e._progressEnabled=!1,r(a,{fromOpacity:0,opacity:1,duration:250,complete:function(){e._progressEnabled=!0,t&&t()}})})}}}},{key:"_stopProgress",value:function(){var t=this;if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var i=e.children[0];this._updateProgress(1),r(i,{fromOpacity:1,opacity:0,duration:250,complete:function(){e.removeAttribute("style"),i.removeAttribute("style"),t._updateProgress(.5),t._progressEnabled=!1}})}}}},{key:"_startProgressLoop",value:function(){if(this._element){var t=this._element.querySelector(".slim-loader");if(t){var e=t.children[0];t.removeAttribute("style"),e.removeAttribute("style"),this._updateProgress(.5);r(t,"stop"),r(t,{rotation:[0,0,-2*Math.PI*1e3],easing:"linear",duration:1e6}),r(e,{fromOpacity:0,opacity:1,duration:250})}}}},{key:"_stopProgressLoop",value:function(t){if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var i=e.children[0];r(i,{fromOpacity:parseFloat(i.style.opacity),opacity:0,duration:250,complete:function(){r(e,"stop"),e.removeAttribute("style"),i.removeAttribute("style"),t&&t()}})}}}},{key:"_isButtonAllowed",value:function(t){return"edit"===t?this._options.edit:"download"===t?this._options.download:"upload"===t?!!this._options.service&&!this._options.push:"remove"!==t||!this._isImageOnly()}},{key:"_fallback",value:function(){var t=k("div","slim-area");t.innerHTML='\n\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t",this._element.appendChild(t),this._throwError(this._options.statusNoSupport)}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onChange(t);break;case"cancel":this._onCancel(t);break;case"confirm":this._onConfirm(t);break;case"file-over":this._onFileOver(t);break;case"file-out":this._onFileOut(t);break;case"file-drop":this._onDropFile(t);break;case"file-invalid":this._onInvalidFile(t);break;case"file-invalid-drop":this._onInvalidFileDrop(t)}}},{key:"_getIntro",value:function(){return this._element.querySelector(".slim-result .in")}},{key:"_getOutro",value:function(){return this._element.querySelector(".slim-result .out")}},{key:"_getInOut",value:function(){return this._element.querySelectorAll(".slim-result img")}},{key:"_getDrip",value:function(){return this._drip||(this._drip=this._element.querySelector(".slim-drip > span")),this._drip}},{key:"_throwError",value:function(t){this._addState("error"),this._element.querySelector(".slim-label").style.display="none";var e=this._element.querySelector(".slim-error");e||(e=k("div","slim-error"),this._element.querySelector(".slim-status").appendChild(e)),e.innerHTML=t}},{key:"_removeError",value:function(){this._removeState("error"),this._element.querySelector(".slim-label").style.display="";var t=this._element.querySelector(".slim-error");t&&t.parentNode.removeChild(t)}},{key:"_openFileDialog",value:function(){this._removeError(),this._input.click()}},{key:"_onClick",value:function(t){var e=this,i=t.target.classList,a=t.target;if(i.contains("slim-file-hopper"))return t.preventDefault(),void this._openFileDialog();switch(a.getAttribute("data-action")){case"remove":this._options.willRemove.apply(this,[this.data,function(){e._doRemove()}]);break;case"edit":this._doEdit();break;case"download":this._doDownload();break;case"upload":this._doUpload()}}},{key:"_onInvalidFileDrop",value:function(){this._onInvalidFile(),this._removeState("file-over");var t=this._getDrip();r(t.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){D(t.firstChild)}})}},{key:"_onInvalidFile",value:function(){var t=this._imageHopper.accept.map(L),e=this._options.statusFileType.replace("$0",t.join(", "));this._throwError(e)}},{key:"_onImageTooSmall",value:function(){var t=this._options.statusImageTooSmall.replace("$0",this._options.minSize.width+" × "+this._options.minSize.height);this._throwError(t)}},{key:"_onOverWeightFile",value:function(){var t=this._options.statusFileSize.replace("$0",this._options.maxFileSize);this._throwError(t)}},{key:"_onRemoteURLProblem",value:function(t){this._throwError(t)}},{key:"_onFileOver",value:function(t){this._addState("file-over"),this._removeError();var e=this._getDrip(),i=r.createMatrix();i.translate(t.detail.x,t.detail.y,0),r.setElementTransform(e,i),1==this._imageHopper.dragPath.length&&(e.style.opacity=1,r(e.firstChild,{fromOpacity:0,opacity:.5,fromScale:[0,0],scale:[.5,.5],duration:150}))}},{key:"_onFileOut",value:function(t){this._removeState("file-over"),this._removeState("file-invalid"),this._removeError();var e=this._getDrip(),i=r.createMatrix();i.translate(t.detail.x,t.detail.y,0),r.setElementTransform(e,i),r(e.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){D(e.firstChild)}})}},{key:"_onDropFile",value:function(t){var e=this;this._removeState("file-over");var i=this._getDrip(),a=r.createMatrix();a.translate(t.detail.x,t.detail.y,0),r.setElementTransform(i,a);var n=this._imageHopper.dragPath.length,o=this._imageHopper.dragPath[n-Math.min(10,n)],s=t.detail.x-o.x,l=t.detail.y-o.y;r(i,{fromPosition:[t.detail.x,t.detail.y,0],position:[t.detail.x+s,t.detail.y+l,0],duration:200}),r(i.firstChild,{fromScale:[.5,.5],scale:[2,2],fromOpacity:1,opacity:0,duration:200,complete:function(){D(i.firstChild),e._load(t.target.files[0])}})}},{key:"_onChange",value:function(t){t.target.files.length&&this._load(t.target.files[0])}},{key:"_load",value:function(e,i){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._isBeingDestroyed){if(this.containsImage())return clearTimeout(this._replaceTimeout),void this._doRemove(function(){a._replaceTimeout=setTimeout(function(){a._load(e,i,n)},100)});this._removeState("empty"),this._addState("busy"),this._startProgressLoop(),this._imageHopper&&(this._imageHopper.enabled=!1),clearTimeout(this._loadTimeout);var o=function(){a._imageHopper&&(a._imageHopper.enabled=!0),a._removeState("loading"),a._removeState("busy"),a._addState("empty"),a._stopProgressLoop()};if("string"!=typeof e){if(void 0!==e.remote)return q(e.remote)?void this._load(j(e.remote),i,n):void(this._options.fetcher&&function(t,e,i,a,n,o){t=t+(-1!==t.indexOf("?")?"&":"?")+"url="+a;var s=new XMLHttpRequest;s.open("GET",t,!0),e(s),s.responseType="json",s.onload=function(){"failure"!==this.response.status?W(this.response.body,i,o):n(this.response.message)},s.send()}(this._options.fetcher,this._options.willFetch,this._options.willLoad,e.remote,function(t){o(),a._onRemoteURLProblem("<p>"+t+"</p>"),i&&i.apply(a,["remote-url-problem"])},function(t){a._load(t,i,n)}));var s=e;if(this._imageHopper&&-1===this._imageHopper.accept.indexOf(s.type))return o(),this._onInvalidFile(),void(i&&i.apply(this,["file-invalid"]));if(s.size&&this._options.maxFileSize&&(l=s.size,l/1e6>this._options.maxFileSize))return o(),this._onOverWeightFile(),void(i&&i.apply(this,["file-too-big"]));var l;this._imageEditor&&this._imageEditor.dirty(),this._data.input.name=n&&n.name?n.name:(c=s,void 0===c.name?H(new Date)+"."+L(z(c)):c.name);var c;this._data.input.type=z(s),this._data.input.size=s.size,this._data.input.file=s,function(e,i,a){var n="string"!=typeof e||0!==e.indexOf("data:image");t.parseMetaData(e,function(o){var s={canvas:!0,crossOrigin:n};i&&(s.maxWidth=i.width,s.maxHeight=i.height),o.exif&&(s.orientation=o.exif.get("Orientation")),t(e,function(t){"error"!==t.type?a(t,o):a()},s)})}(s,this._options.internalCanvasSize,function(t,e){var o=function(){a._imageHopper&&(a._imageHopper.enabled=!0),a._removeState("loading"),a._removeState("busy"),a._addState("empty"),a._stopProgressLoop(),a._resetData()};if(!t)return o(),void(i&&i.apply(a,["file-not-found"]));if(l=t,c=a._options.minSize,!(parseInt(l.width,10)>=c.width&&parseInt(l.height,10)>=c.height))return o(),a._onImageTooSmall(),void(i&&i.apply(a,["image-too-small"]));var l,c,h=a._options.didLoad.apply(a,[s,t,e,a]);if(!0!==h)return o(),!1!==h&&a._throwError(h),void(i&&i.apply(a,[h]));a._removeState("loading");a._loadCanvas(t,function(t){a._addState("preview"),function(t){a._imageHopper&&a._options.dropReplace&&(a._imageHopper.enabled=!0);var e=a._getIntro(),i={fromScale:[1.25,1.25],scale:[1,1],fromOpacity:0,opacity:1,complete:function(){D(e),e.style.opacity=1,t()}};a.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.7),a._canInstantEdit()&&(i.delay=500,i.duration=1,a._doEdit()),r(e,i)}(function(){a._canInstantEdit()||t||a._showButtons(),t||(a._stopProgressLoop(),a._removeState("busy")),i&&i.apply(a,[null,a.data])})},function(){a._canInstantEdit()||a._showButtons(),a._removeState("busy")},{blockPush:n.blockPush})})}else q(e)?this._load(j(e),i,n):(clearTimeout(a._loadTimeout),a._loadTimeout=setTimeout(function(){a._isBeingDestroyed||(a._addState("loading"),r(a._element.querySelector(".slim-label-loading"),{fromOpacity:0,opacity:1,duration:250}))},500),W(e,this._options.willLoad,function(t){a._load(t,i,n)}))}}},{key:"_loadCanvas",value:function(t,e,i,a){var n=this;if(a||(a={}),!this._isBeingDestroyed){this._data.input.image=t,this._data.input.width=t.width,this._data.input.height=t.height,this._initialRotation&&(this._data.actions.rotation=this._initialRotation,this._initialRotation=null);var o=this._data.actions.rotation%180!=0;this._isFixedRatio()||(this._initialCrop?this._ratio=this._initialCrop.height/this._initialCrop.width:this._ratio=o?t.width/t.height:t.height/t.width,this._scaleDropArea(this._ratio)),this._initialCrop?(this._data.actions.crop=tt(this._initialCrop),this._data.actions.crop.type=mt,this._initialCrop=null):(this._data.actions.crop=X(o?t.height:t.width,o?t.width:t.height,this._ratio),this._data.actions.crop.type=ft),this._options.size&&(this._data.actions.size={width:this._options.size.width,height:this._options.size.height}),this._applyTransforms(t,function(t){var o=n._getIntro(),s=o.offsetWidth/t.width,r=!1;n._options.service&&n._options.push&&!a.blockPush&&(n._hasInitialImage||n._canInstantEdit()||(r=!0,n._stopProgressLoop(function(){n._startProgress(function(){n._updateProgress(.1)})}))),n._canInstantEdit()||n._save(function(){n._isBeingDestroyed||r&&(n._stopProgress(),i())},r),o.src="",o.src=Y(t,s).toDataURL(),o.onload=function(){o.onload=null,n._isBeingDestroyed||e&&e(r)}})}}},{key:"_applyTransforms",value:function(t,e){var i=this,a=tt(this._data.actions);a.filters={sharpen:this._options.filterSharpen/100},this._options.forceMinSize?a.minSize=this._options.minSize:a.minSize={width:0,height:0},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],a=k("canvas"),n=e.rotation,o=e.crop,s=e.size,r=e.filters,l=e.minSize;if(o){var c=n%180!=0,h={width:c?t.height:t.width,height:c?t.width:t.height};o.x<0&&(o.x=0),o.y<0&&(o.y=0),o.width>h.width&&(o.width=h.width),o.height>h.height&&(o.height=h.height),o.y+o.height>h.height&&(o.y=Math.max(0,h.height-o.height)),o.x+o.width>h.width&&(o.x=Math.max(0,h.width-o.width));var u=o.x/h.width,d=o.y/h.height,p=o.width/h.width,v=o.height/h.height;a.width=o.width,a.height=o.height;var f=a.getContext("2d");90===n?(f.translate(.5*a.width,.5*a.height),f.rotate(-90*Math.PI/180),f.drawImage(t,(1-d)*t.width-t.width*v,o.x,o.height,o.width,.5*-a.height,.5*-a.width,a.height,a.width)):180===n?(f.translate(.5*a.width,.5*a.height),f.rotate(-180*Math.PI/180),f.drawImage(t,(1-(u+p))*h.width,(1-(d+v))*h.height,p*h.width,v*h.height,.5*-a.width,.5*-a.height,a.width,a.height)):270===n?(f.translate(.5*a.width,.5*a.height),f.rotate(-270*Math.PI/180),f.drawImage(t,o.y,(1-u)*t.height-t.height*p,o.height,o.width,.5*-a.height,.5*-a.width,a.height,a.width)):f.drawImage(t,o.x,o.y,o.width,o.height,0,0,a.width,a.height)}if(s){var m=s.width/a.width,_=s.height/a.height;Q(a,Math.min(m,_),s,l),r.sharpen>0&&K(a,J(r.sharpen))}i(a)}(t,a,function(t){var a=t;if(i._options.forceSize||i._options.size&&1==function(t,e){var i=Math.abs(t.width-e.width),a=Math.abs(t.height-e.height);return Math.max(i,a)}(i._options.size,t)){(a=k("canvas")).width=i._options.size.width,a.height=i._options.size.height;a.getContext("2d").drawImage(t,0,0,i._options.size.width,i._options.size.height)}if(i._options.forceMinSize&&i._options.size&&i._options.minSize.width===i._options.size.width&&i._options.minSize.height===i._options.size.height&&(a.width<i._options.minSize.width||a.height<i._options.minSize.height)){var n=Math.max(a.width,i._options.minSize.width),o=Math.max(a.height,i._options.minSize.height);(a=k("canvas")).width=n,a.height=o;a.getContext("2d").drawImage(t,0,0,n,o)}if(i._options.forceMinSize&&1===i._ratio&&(a.width<i._options.minSize.width||a.height<i._options.minSize.height)){(a=k("canvas")).width=i._options.minSize.width,a.height=i._options.minSize.height;a.getContext("2d").drawImage(t,0,0,a.width,a.height)}i._data.output.width=a.width,i._data.output.height=a.height,i._data.output.image=a,i._onTransformCanvas(function(t){i._data=t,i._options.didTransform.apply(i,[i.data,i]),e(i._data.output.image)})})}},{key:"_onTransformCanvas",value:function(t){this._options.willTransform.apply(this,[this.data,t,this])}},{key:"_appendEditor",value:function(){var t=this;this._imageEditor||(this._imageEditor=new ht(k("div"),{minSize:this._options.minSize,buttonConfirmClassName:this._options.buttonConfirmClassName,buttonCancelClassName:this._options.buttonCancelClassName,buttonRotateClassName:this._options.buttonRotateClassName,buttonConfirmLabel:this._options.buttonConfirmLabel,buttonCancelLabel:this._options.buttonCancelLabel,buttonRotateLabel:this._options.buttonRotateLabel,buttonConfirmTitle:this._options.buttonConfirmTitle,buttonCancelTitle:this._options.buttonCancelTitle,buttonRotateTitle:this._options.buttonRotateTitle}),wt.forEach(function(e){t._imageEditor.element.addEventListener(e,t)}))}},{key:"_scaleDropArea",value:function(t){var e=this._getRatioSpacerElement();e&&this._element&&(e.style.marginBottom=100*t+"%",this._element.setAttribute("data-ratio","1:"+t))}},{key:"_onCancel",value:function(t){this._removeState("editor"),this._options.didCancel.apply(this,[this]),this._showButtons(),this._hideEditor(),this._options.instantEdit&&!this._hasInitialImage&&this._isAutoCrop()&&this._doRemove()}},{key:"_onConfirm",value:function(t){var e=this,i=this._options.service&&this._options.push;i?this._startProgress(function(){e._updateProgress(.1)}):this._startProgressLoop(),this._removeState("editor"),this._addState("busy"),this._output.value="",this._data.actions.rotation=t.detail.rotation,this._data.actions.crop=t.detail.crop,this._data.actions.crop.type=_t,this._applyTransforms(this._data.input.image,function(t){e._options.didConfirm.apply(e,[e.data,e]);var a=e._getInOut(),n="out"===a[0].className?a[0]:a[1],o=n===a[0]?a[1]:a[0];n.className="in",n.style.opacity="0",n.style.zIndex="2",o.className="out",o.style.zIndex="1",n.src="",n.src=Y(t,n.offsetWidth/t.width).toDataURL(),n.onload=function(){n.onload=null,"free"===e._options.ratio&&(e._ratio=n.naturalHeight/n.naturalWidth,e._scaleDropArea(e._ratio)),e._hideEditor();var t=setTimeout(function(){e._showPreview(n,function(){e._save(function(t,a,n){e._toggleButton("upload",!0),i?e._stopProgress():e._stopProgressLoop(),e._removeState("busy"),e._showButtons()},i)})},250);e._timers.push(t)}})}},{key:"_cropAuto",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){},e=this._data.actions.rotation%180!=0,i=X(e?this._data.input.image.width:this._data.input.image.height,e?this._data.input.image.height:this._data.input.image.width,this._ratio);this._crop(i.x,i.y,i.width,i.height,t,ft)}},{key:"_crop",value:function(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_t;this._output.value="",this._data.actions.crop={x:t,y:e,width:i,height:a},this._data.actions.crop.type=o,this._manualTransform(n)}},{key:"_manualTransform",value:function(t){var e=this;this._startProgressLoop(),this._addState("busy"),this._applyTransforms(this._data.input.image,function(i){var a=e._getInOut(),n="out"===a[0].className?a[0]:a[1],o=n===a[0]?a[1]:a[0];n.className="in",n.style.opacity="1",n.style.zIndex="2",o.className="out",o.style.zIndex="0",n.src="",n.src=Y(i,n.offsetWidth/i.width).toDataURL(),n.onload=function(){n.onload=null,"free"===e._options.ratio&&(e._ratio=n.naturalHeight/n.naturalWidth,e._scaleDropArea(e._ratio));var i=e._options.service&&e._options.push,a=function(){e._save(function(a,n,o){i||e._stopProgressLoop(),e._removeState("busy"),t.apply(e,[e.data])},i)};i?e._startProgress(a):a()}})}},{key:"_save",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._isBeingDestroyed){var a=this.dataBase64;this._options.service||this._isInitialising&&!this._isImageOnly()||this._options.willSave.apply(this,[a,function(e){t._store(e),t._options.didSave.apply(t,[e,t])},this]),this._isBeingDestroyed||(this._options.service&&i&&this._options.willSave.apply(this,[a,function(i){t._addState("upload"),t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!1),t._upload(i,function(a,n){t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!0),a||t._storeServerResponse(n),t._options.didUpload.apply(t,[a,i,n,t]),t._removeState("upload"),e(a,i,n)})},this]),this._options.service&&i||e())}}},{key:"_storeServerResponse",value:function(t){this._isRequired&&(this._input.required=!1),this._data.server=t,this._output.value="object"===(void 0===t?"undefined":h(t))?s()(this._data.server):t}},{key:"_store",value:function(t){this._isRequired&&(this._input.required=!1),this._output.value=s()(t)}},{key:"_upload",value:function(t,e){var i=this;this.requestOutput(function(t,a){var n=i._element.querySelector(".slim-upload-status"),o=i._options.willRequest,s=function(t,e){i._updateProgress(Math.max(.1,t/e))},r=function(t){var a=setTimeout(function(){if(!i._isBeingDestroyed){n.innerHTML=i._options.statusUploadSuccess,n.setAttribute("data-state","success"),n.style.opacity=1;var t=setTimeout(function(){n.style.opacity=0},2e3);i._timers.push(t)}},250);i._timers.push(a),e(null,t)},l=function(t){var a="";a="file-too-big"===t?i._options.statusContentLength:i._options.didReceiveServerError.apply(i,[t,i._options.statusUnknownResponse,i]);var o=setTimeout(function(){n.innerHTML=a,n.setAttribute("data-state","error"),n.style.opacity=1},250);i._timers.push(o),e(t)};"string"==typeof i._options.service?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",i=arguments[2],a=arguments[3],n=arguments[4],o=arguments[5],s=arguments[6],r=new XMLHttpRequest;n&&r.upload.addEventListener("progress",function(t){n(t.loaded,t.total)}),r.open(e,t,!0),a&&a(r,i),r.onreadystatechange=function(){if(4===r.readyState&&r.status>=200&&r.status<300){var t=r.responseText;if(!t.length)return void o();if(-1!==t.indexOf("Content-Length"))return void s("file-too-big");var e=void 0;try{e=JSON.parse(r.responseText)}catch(t){}if("object"===(void 0===e?"undefined":h(e))&&"failure"===e.status)return void s(e.message);o(e||t)}else if(4===r.readyState){var i=void 0;try{i=JSON.parse(r.responseText)}catch(t){}if("object"===(void 0===i?"undefined":h(i))&&"failure"===i.status)return void s(i.message);s("fail")}},r.send(i)}(i._options.service,i._options.uploadMethod,a,o,s,r,l):"function"==typeof i._options.service&&i._options.service.apply(i,["file"===i._options.serviceFormat?t:a,s,r,l])},t)}},{key:"requestOutput",value:function(e,i){var a=this;this._data.input.file?(i||(i=this.dataBase64),t.parseMetaData(this._data.input.file,function(n){var o=[],r=new FormData;if($("input",a._options.post)&&(o.push(a._data.input.file),r.append(a._inputReference,a._data.input.file,a._data.input.file.name)),$("output",a._options.post)&&null!==a._data.output.image&&!1===a._options.uploadBase64){var l=j(i.output.image,i.output.name);if(n.imageHead&&a._options.copyImageHead)try{l=new Blob([n.imageHead,t.blobSlice.call(l,20)],{type:at(i.output.image)}),l=U(l,i.output.name)}catch(t){}o.push(l);var c="slim_output_"+a._uid;i.output.image=null,i.output.field=c,r.append(c,l,i.output.name)}r.append(a._output.name,s()(i)),e(o,r)},{maxMetaDataSize:262144,disableImageHead:!1})):e(null,null)}},{key:"_showEditor",value:function(){xt.className=this._options.popoverClassName,xt.show(),this._imageEditor.show()}},{key:"_hideEditor",value:function(){this._imageEditor.hide();var t=setTimeout(function(){xt.hide()},250);this._timers.push(t)}},{key:"_showPreview",value:function(t,e){r(t,{fromPosition:[0,50,0],position:[0,0,0],fromScale:[1.5,1.5],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.7,complete:function(){D(t),e&&e()}})}},{key:"_hideResult",value:function(t){var e=this._getIntro();e&&r(e,{fromScale:[1,1],scale:[.5,.5],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,complete:function(){D(e),t&&t()}})}},{key:"_showButtons",value:function(t){if(this._btnGroup){this._btnGroup.style.display="";var e={fromScale:[.5,.5],scale:[1,1],fromPosition:[0,10,0],position:[0,0,0],fromOpacity:0,opacity:1,complete:function(){D(this)},allDone:function(){t&&t()}};this.isDetached()?e.duration=1:(e.delay=function(t){return 250+50*t},e.easing="spring",e.springConstant=.3,e.springDeceleration=.85),r(this._btnGroup.childNodes,e)}}},{key:"_hideButtons",value:function(t){var e=this;if(this._btnGroup){var i={fromScale:[1,1],scale:[.85,.85],fromOpacity:1,opacity:0,allDone:function(){e._btnGroup.style.display="none",t&&t()}};this.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.75),r(this._btnGroup.childNodes,i)}}},{key:"_hideStatus",value:function(){this._element.querySelector(".slim-upload-status").style.opacity=0}},{key:"_doEdit",value:function(){var t=this;this._data.input.image&&(this._addState("editor"),this._imageEditor||this._appendEditor(),this._imageEditor.showRotateButton=this._options.rotateButton,xt.inner=this._imageEditor.element,this._imageEditor.open(Z(this._data.input.image),"free"===this._options.ratio?null:this._ratio,this._data.actions.crop,this._data.actions.rotation,function(){t._showEditor(),t._hideButtons(),t._hideStatus()}))}},{key:"_doRemove",value:function(t){var e=this;if(!this._isImageOnly()){this._clearState(),this._addState("empty"),this._hasInitialImage=!1,this._imageHopper&&(this._imageHopper.enabled=!0),this._isRequired&&(this._input.required=!0);var i=this._getOutro();i&&(i.style.opacity="0");var a=this.data;this._resetData();var n=setTimeout(function(){e._isBeingDestroyed||(e._hideButtons(function(){e._toggleButton("upload",!0)}),e._hideStatus(),e._hideResult(),e._options.didRemove.apply(e,[a,e]),t&&t())},this.isDetached()?0:250);return this._timers.push(n),a}}},{key:"_doUpload",value:function(t){var e=this;this._data.input.image&&(this._addState("upload"),this._startProgress(),this._hideButtons(function(){e._toggleButton("upload",!1),e._save(function(i,a,n){e._removeState("upload"),e._stopProgress(),t&&t.apply(e,[i,a,n]),i&&e._toggleButton("upload",!0),e._showButtons()})}))}},{key:"_doDownload",value:function(){this._data.output.image&&function(t,e,i){var a=t.output.image,n=i?F(t.input.name)+"."+i:t.input.name,o=b[i]||t.input.type;"image/png"===o&&(n=F(t.input.name)+".png"),a.toBlob(function(t){if("msSaveBlob"in window.navigator)window.navigator.msSaveBlob(t,n);else{var e=(window.URL||window.webkitURL).createObjectURL(t),i=k("a");i.style.display="none",i.download=n,i.href=e,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),(window.URL||window.webkitURL).revokeObjectURL(e)},0)}},o,"number"==typeof e?e/100:void 0)}(this._data,this._options.jpegCompression,this._options.forceType)}},{key:"_doDestroy",value:function(){var t=this;this._isBeingDestroyed=!0,this._timers.forEach(function(t){clearTimeout(t)}),this._timers=[],r(this._element,"detach"),this._imageHopper&&(yt.forEach(function(e){t._imageHopper.element.removeEventListener(e,t)}),this._imageHopper.destroy(),this._imageHopper=null),this._imageEditor&&(wt.forEach(function(e){t._imageEditor.element.removeEventListener(e,t)}),this._imageEditor.destroy(),this._imageEditor=null),nt(this._btnGroup.children).forEach(function(e){e.removeEventListener("click",t)}),this._input.removeEventListener("change",this),this._element!==this._originalElement&&this._element.parentNode&&this._element.parentNode.replaceChild(this._originalElement,this._element),this._originalElement.innerHTML=this._originalElementInner;function e(t,e){return 0!==e.filter(function(e){return t.name===e.name&&t.value===e.value}).length}var i=p(this._originalElement);i.forEach(function(i){e(i,t._originalElementAttributes)||t._originalElement.removeAttribute(i.name)}),this._originalElementAttributes.forEach(function(a){e(a,i)||t._originalElement.setAttribute(a.name,a.value)}),kt=Math.max(0,kt-1),xt&&0===kt&&(xt.destroy(),xt=null),this._originalElement=null,this._element=null,this._input=null,this._output=null,this._btnGroup=null,this._options=null}},{key:"dataBase64",get:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2],a=arguments[3],n=arguments[4],o={server:tt(t.server),meta:tt(t.meta),input:{name:t.input.name,type:t.input.type,size:t.input.size,width:t.input.width,height:t.input.height,field:t.input.field}};return $("input",e)&&!n&&(o.input.image=it(t.input.image,t.input.type)),$("output",e)&&(o.output={name:a?F(t.input.name)+"."+a:t.input.name,type:b[a]||t.input.type,width:t.output.width,height:t.output.height},o.output.image=it(t.output.image,o.output.type,i),o.output.type=at(o.output.image),"image/png"===o.output.type&&(o.output.name=F(o.input.name)+".png")),$("actions",e)&&(o.actions=tt(t.actions)),o}(this._data,this._options.post,this._options.jpegCompression,this._options.forceType,null!==this._options.service)}},{key:"data",get:function(){return function(t){var e=tt(t);return e.input.file=et(t.input.file),e.output.image=Z(t.output.image),e}(this._data)}},{key:"element",get:function(){return this._element}},{key:"service",set:function(t){this._options.service=t}},{key:"size",set:function(t){this.setSize(t,null)}},{key:"rotation",set:function(t){this.setRotation(t,null)}},{key:"forceSize",set:function(t){this.setForceSize(t,null)}},{key:"ratio",set:function(t){this.setRatio(t,null)}}],[{key:"options",value:function(){var t={edit:!0,instantEdit:!1,uploadBase64:!1,meta:{},ratio:"free",size:null,rotation:null,crop:null,post:["output","actions"],service:null,serviceFormat:null,filterSharpen:0,push:!1,defaultInputName:"slim[]",minSize:{width:0,height:0},maxFileSize:null,jpegCompression:null,uploadMethod:"POST",download:!1,saveInitialImage:!1,forceType:!1,forceSize:null,forceMinSize:!0,dropReplace:!0,fetcher:null,internalCanvasSize:{width:4096,height:4096},copyImageHead:!1,rotateButton:!0,popoverClassName:null,label:"<p>Drop your image here</p>",labelLoading:"<p>Loading image...</p>",statusFileType:"<p>Invalid file type, expects: $0.</p>",statusFileSize:"<p>File is too big, maximum file size: $0 MB.</p>",statusNoSupport:"<p>Your browser does not support image cropping.</p>",statusImageTooSmall:"<p>Image is too small, minimum size is: $0 pixels.</p>",statusContentLength:'<span class="slim-upload-status-icon"></span> The file is probably too big',statusUnknownResponse:'<span class="slim-upload-status-icon"></span> An unknown error occurred',statusUploadSuccess:'<span class="slim-upload-status-icon"></span> Saved',didInit:function(t){},didLoad:function(t,e,i){return!0},didSave:function(t){},didUpload:function(t,e,i){},didReceiveServerError:function(t,e){return e},didRemove:function(t){},didTransform:function(t){},didConfirm:function(t){},didCancel:function(){},willTransform:function(t,e){e(t)},willSave:function(t,e){e(t)},willRemove:function(t,e){e()},willRequest:function(t,e){},willFetch:function(t){},willLoad:function(t){}};return bt.concat(ht.Buttons).concat("rotate").forEach(function(e){var i=A(e);t["button"+i+"ClassName"]=null,t["button"+i+"Label"]=i,t["button"+i+"Title"]=i}),t}}]),e}();return function(){var t=[];function e(t){var e=window,i=t.split(".");return i.forEach(function(t,a){e[i[a]]&&(e=e[i[a]])}),e!==window?e:null}var i=function(t){return t},a=function(t){return"true"===t},n=function(t){return!t||"true"===t},o=function(t){return(e=t)?"<p>"+e+"</p>":null;var e},s=function(t){return t?e(t):null},r=function(t){if(!t)return null;var e=pt(t,",");return{width:e[0],height:e[1]}},l=function(t){return t?parseInt(t,10):null},c={download:a,edit:n,instantEdit:a,minSize:r,size:r,forceSize:r,forceMinSize:n,internalCanvasSize:r,service:function(t){if(void 0===t)return null;var i=e(t);return i||t},serviceFormat:function(t){return void 0===t?null:t},fetcher:function(t){return void 0===t?null:t},push:a,rotation:function(t){return void 0===t?null:parseInt(t,10)},crop:function(t){if(!t)return null;var e={};return t.split(",").map(function(t){return parseInt(t,10)}).forEach(function(t,i){e[gt[i]]=t}),e},post:function(t){return t?t.split(",").map(function(t){return t.trim()}):null},defaultInputName:i,ratio:function(t){return t||null},maxFileSize:function(t){return t?parseFloat(t):null},filterSharpen:l,jpegCompression:l,uploadBase64:a,forceType:i,dropReplace:n,saveInitialImage:a,copyImageHead:a,rotateButton:n,label:o,labelLoading:o,popoverClassName:i,uploadMethod:i};["FileSize","FileType","NoSupport","ImageTooSmall"].forEach(function(t){c["status"+t]=o}),["ContentLength","UnknownResponse","UploadSuccess"].forEach(function(t){c["status"+t]=i}),["Init","Load","Save","Upload","Remove","Transform","ReceiveServerError","Confirm","Cancel"].forEach(function(t){c["did"+t]=s}),["Transform","Save","Remove","Request","Load","Fetch"].forEach(function(t){c["will"+t]=s});var h=["ClassName","Label","Title"];bt.concat(ht.Buttons).concat("rotate").forEach(function(t){var e=A(t);h.forEach(function(t){c["button"+e+t]=i})}),At.supported=!("[object OperaMini]"===Object.prototype.toString.call(window.operamini)||void 0===window.addEventListener||void 0===window.FileReader||!("slice"in Blob.prototype)||void 0===window.URL||void 0===window.URL.createObjectURL),At.parse=function(t){var e,i,a,n=[];for(a=(e=t.querySelectorAll(".slim:not([data-state])")).length;a--;)i=e[a],n.push(At.create(i,At.getOptionsFromAttributes(i)));return n},At.getOptionsFromAttributes=function(t){var e=function(t){if(void 0===t.dataset){var e,i={},a=t.attributes;for(e in a)a.hasOwnProperty(e)&&a[e].name&&/^data-[a-z_\-\d]*$/i.test(a[e].name)&&(i[d(a[e].name.substr(5))]=a[e].value);return i}return t.dataset}(t),i={meta:{}};for(var a in e){var n=c[a],o=e[a];n?(o=null===(o=n(o))?tt(At.options()[a]):o,i[a]=o):0===a.indexOf("meta")&&(i.meta[(s=a.substr(4),s.charAt(0).toLowerCase()+s.slice(1))]=o)}var s;return i},At.find=function(e){var i=t.filter(function(t){return t.isAttachedTo(e)});return i?i[0]:null},At.create=function(e,i){if(!At.find(e)){i||(i=At.getOptionsFromAttributes(e));var a=new At(e,i);return t.push(a),a}},At.destroy=function(e){var i=function(e){for(var i=0,a=t.length;i<a;i++)if(t[i].isAttachedTo(e))return i;return-1}(e);return!(i<0)&&(t[i].destroy(),t.splice(i,1),!0)}}(),At}():null,N={name:"slim-cropper",data:function(){return{slim:null,avatar_ready:!1,avatar_removed:!1,editing_contact:this.editingContact||!1,options:{ratio:"1:1",initialImage:"",minSize:"100, 100",service:this.slimService,didInit:this.slimInit,didLoad:this.slimLoaded,didRemove:this.slimRemoved,didUpload:this.slimUploaded,label:"Drop your avatar here. Or click to select.",statusUploadSuccess:"Avatar Uploaded successfully.",maxFileSize:2,serviceFormat:"file",instantEdit:!1}}},props:["state"],methods:{cancelSlim:function(){this.$store.state.slim&&this.slim.remove(),this.$store.state.add_contact?this.setAvatar({}):this.$store.state.view_contact,this.avatar_ready=!1,this.$store.dispatch("setSlim",{active:!1})},doneSlim:function(){var t=this;if(this.avatar_removed)this.setAvatar({});else{this.$store.dispatch("setSnackbar",{color:"info",message:"Updating avatar thumbnail..."});var e=this.$store.state.slim.contact.avatar;this.getThumbnail(e.filename).then(function(e){t.setAvatar({thumbnail:e}),console.log("doneSlim: Successfully added thumbnail"),t.$store.dispatch("setSnackbar",{color:"success",message:"Successfully updated avatar thumbnail"})}).catch(function(e){t.$store.dispatch("setSnackbar",{color:"error",message:"Unable to retrieve thumbnail. Error was logged in the console"}),console.log("doneSlim:",e),t.$store.state.view_contact&&t.updateContact()})}this.slim.remove(),this.avatar_ready=!1,this.$store.dispatch("setSlim",{active:!1})},updateContact:function(){this.$store.dispatch("setSnackbar",{color:"info",message:"Updating contact..."});var t=this;A(this.$store.state.slim.contact,function(e){var i={};i=e?{color:"error",message:""+e}:{color:"success",message:"Contact updated successfully!"},t.$store.dispatch("setSnackbar",i)})},getThumbnail:function(t){return new y.a(function(e,i){E.child("avatars/thumb_"+t).getDownloadURL().then(function(t){console.log("getThumbnail: Successfully retrieved thumbnail"),e(t)}).catch(function(t){console.log("getThumbnail: Unable to retrieve thumbnail",t),i(t)})})},setAvatar:function(t){var e=t.avatar,i=void 0===e?"":e,a=t.thumbnail,n=void 0===a?"":a,o=t.filename,s=void 0===o?"":o,r=!(i||n||s);if(this.$store.state.add_contact){var l=this.$store.state.new_contact;r?l.avatar=null:(l.avatar||(l.avatar={avatar:"",thumbnail:"",filename:""}),i&&(l.avatar.avatar=i),s&&(l.avatar.filename=s),n&&(l.avatar.thumbnail=n)),this.$store.dispatch("setNewContact",l),console.log("setAvatar: Successfully set newContact")}else if(this.$store.state.edit_contact||this.$store.state.view_contact){var c=this.$store.state.slim.contact;r?c.avatar=null:(c.avatar||(c.avatar={avatar:"",thumbnail:"",filename:""}),i&&(c.avatar.avatar=i),n&&(c.avatar.thumbnail=n),s&&(c.avatar.filename=s)),this.$store.state.view_contact&&this.updateContact(),console.log("setAvatar: Successfully updated contact")}},slimLoaded:function(t,e,i){return this.avatar_ready=!1,!0},slimRemoved:function(t){(this.$store.state.edit_contact||this.$store.state.view_contact)&&(this.avatar_removed=!0,this.avatar_ready=!0),this.$store.state.slim.contact.avatar||(this.avatar_ready=!1)},slimUploaded:function(t,e,i){this.avatar_ready=!t,this.avatar_removed=!1},slimInit:function(t,e){this.$store.dispatch("setSlim",{active:!1,instance:e})},slimService:function(t,e,i,a){this.$store.dispatch("setSnackbar",{color:"info",message:"Uploading avatar..."}),t=t[0];var n=this,o=Date.now(),s=t.name+"-"+o,r=E.child("avatars/"+s).put(t);r.on(b.a.storage.TaskEvent.STATE_CHANGED,function(t){switch(e(t.bytesTransferred,t.totalBytes),t.state){case b.a.storage.TaskState.PAUSED:case b.a.storage.TaskState.RUNNING:}},function(t){switch(t.code){case"storage/unauthorized":a("You do not have permission to access the object."),n.$store.dispatch("setSnackbar",{color:"error",message:"You do not have permission to access the object."});break;case"storage/canceled":a("The update was cancelled."),n.$store.dispatch("setSnackbar",{color:"error",message:"The update was cancelled."});break;case"storage/unknown":a("An unknown error occurred."),n.$store.dispatch("setSnackbar",{color:"error",message:"An unknown error occurred."})}},function(){i("Avatar uploaded successfully.");var t=r.snapshot.downloadURL;n.setAvatar({avatar:t,filename:s}),n.$store.dispatch("setSnackbar",{color:"success",message:"Avatar uploaded successfully."})})}},mounted:function(){this.slim=new L(this.$refs.cropper,this.options)},destroyed:function(){this.slim.destroy()}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"",fullscreen:t.$vuetify.breakpoint.smAndDown,width:"700px",transition:"dialog-bottom-transition"},model:{value:t.$store.state.slim.active,callback:function(e){t.$set(t.$store.state.slim,"active",e)},expression:"$store.state.slim.active"}},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[t._v("\n      Upload avatar\n    ")]),t._v(" "),i("v-container",[i("v-layout",[i("v-flex",{attrs:{xs8:"","offset-xs2":"",sm8:"","offset-sm2":"",md8:"","offset-md2":""}},[i("div",{ref:"cropper",staticClass:"slim subheading",style:{cursor:"pointer"}},[i("input",{attrs:{type:"file",name:"slim[]"}})])])],1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{staticClass:"mr-0",style:{margin:"0 auto"},attrs:{large:"",color:"primary"},on:{click:t.cancelSlim}},[t._v("\n        Cancel\n      ")]),t._v(" "),i("v-btn",{style:{margin:"0 auto"},attrs:{large:"",color:"success",disabled:!t.avatar_ready},on:{click:t.doneSlim}},[t._v("\n        Done\n      ")])],1)],1)],1)},staticRenderFns:[]};var H=i("VU/8")(N,M,!1,function(t){i("OkXh")},null,null).exports,z={name:"app",data:function(){return{items:[{icon:"contacts",text:"Contacts"},{icon:"history",text:"Frequently contacted"},{icon:"content-copy",text:"Duplicates"},{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"Labels",model:!0,children:[{icon:"add",text:"Create label"}]},{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{text:"Import"},{text:"Export"},{text:"Print"},{text:"Undo changes"},{text:"Other contacts"}]},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"Send feedback"},{icon:"help",text:"Help"},{icon:"phonelink",text:"App downloads"},{icon:"keyboard",text:"Go to the old version"}]}},props:{source:String},components:{Drawer:l,MainToolbar:d,SearchToolbar:f,SelectToolbar:_,"slim-cropper":H},methods:{closeSnackbar:function(){this.$store.dispatch("setSnackbar",{active:!1})},getRandomColor:function(){return this.$store.state.colors[Math.floor(Math.random()*this.$store.state.colors.length)]}},created:function(){var t=this;S.orderByChild("fullName").on("value",function(e){var i=[];e.forEach(function(e){var a=JSON.parse(s()(e.val()));a.color=t.getRandomColor(),i.push(a)}),t.$store.dispatch("setContacts",i)}),this.$store.dispatch("setTooltips")}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("drawer",{ref:"drawer"}),t._v(" "),i("main-toolbar",{ref:"main_toolbar"}),t._v(" "),i("search-toolbar",{ref:"search_toolbar"}),t._v(" "),i("select-toolbar",{ref:"select_toolbar"}),t._v(" "),i("router-view"),t._v(" "),i("slim-cropper",{ref:"slim_cropper"}),t._v(" "),i("v-snackbar",{ref:"snackbar",attrs:{timeout:t.$store.state.snackbar.timeout,color:t.$store.state.snackbar.color,bottom:!0,"multi-line":!1},model:{value:t.$store.state.snackbar.active,callback:function(e){t.$set(t.$store.state.snackbar,"active",e)},expression:"$store.state.snackbar.active"}},[t._v("\n    "+t._s(t.$store.state.snackbar.message)+"\n    "),i("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.closeSnackbar(e)}}},[t._v("Close")])],1)],1)},staticRenderFns:[]},U=i("VU/8")(z,F,!1,null,null,null).exports,q=i("/ocq"),W=i("7t+N"),V=i.n(W),j=i("ZrCm");i("xVek");var G={name:"edit-contact",data:function(){return{avatar_hover:!1,menu:!1,contact:{id:null,fullName:"",avatar:{},emails:[],phones:[],addresses:[],starred:!1,hidden:!1},temp_contact:{id:null,fullName:"",avatar:{},emails:[],phones:[],addresses:[],starred:!1,hidden:!1},labels:["Home","Work","Other"],fullNameHover:!1,dateOfBirthHover:!1,currentAddressHover:null,currentPhoneHover:null,currentEmailHover:null,fullNameRules:[function(t){return!!t||"Full Name is required"},function(t){return t&&t.split(" ").length>1&&t.split(" ")[1].length>0||"Full Name must have at least 2 names"}],dateOfBirthRules:[function(t){return!!t||"Date of Birth is required"}],phoneRules:[function(t){return!!t||"Phone is required"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}]}},computed:{contactToEdit:function(){var t=this.$store.getters.getActiveContact;return t&&(this.temp_contact=JSON.parse(s()(t))),t?JSON.parse(s()(t)):this.temp_contact},newAddressId:function(){return this.contact.addresses.slice(-1)[0].id+1},newPhoneId:function(){return this.contact.phones.slice(-1)[0].id+1},newEmailId:function(){return this.contact.emails.slice(-1)[0].id+1}},methods:{openSlim:function(){var t=this;this.contact.avatar&&this.$store.state.slim.instance.load(this.contact.avatar.avatar,function(e,i){e&&t.$store.dispatch("setSnackbar",{color:"info",message:"Unable to automatically load your avatar. Proceed with manual upload."})}),this.$store.dispatch("setSlim",{contact:this.contact})},addAddress:function(){this.contact.addresses.push({id:this.newAddressId+1,value:"",label:""})},addPhone:function(){this.contact.phones.push({id:this.newPhoneId+1,value:"",label:""})},addEmail:function(){this.contact.emails.push({id:this.newEmailId+1,value:"",label:""})},removeAvatar:function(){this.contact.avatar=null},removeFullName:function(){this.contact.fullName="",this.$refs.fullName.reset()},removeDateOfBirth:function(){this.contact.dateOfBirth=null,this.$refs.dateOfBirth.reset()},removeAddress:function(t){this.contact.addresses.length>1?this.contact.addresses=this.contact.addresses.filter(function(e){return e.id!==t.id}):(t.id=null,t.value="",t.label="")},removePhone:function(t){if(this.contact.phones.length>1)this.contact.phones=this.contact.phones.filter(function(e){return e.id!==t.id});else{t.id=null,t.value="",t.label="";var e=this.$refs["phone_"+t.id];if(e&&e.length>0){var i=!0,a=!1,n=void 0;try{for(var o,s=k()(e);!(i=(o=s.next()).done);i=!0){o.value.reset()}}catch(t){a=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}}}},removeEmail:function(t){if(this.contact.emails.length>1)this.contact.emails=this.contact.emails.filter(function(e){return e.id!==t.id});else{t.id=null,t.value="",t.label="";var e=this.$refs["email_"+t.id];if(e&&e.length>0){var i=!0,a=!1,n=void 0;try{for(var o,s=k()(e);!(i=(o=s.next()).done);i=!0){o.value.reset()}}catch(t){a=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}}}},clearEditContact:function(){if(this.removeFullName(),this.removeDateOfBirth(),this.contact.addresses){var t=!0,e=!1,i=void 0;try{for(var a,n=k()(this.contact.addresses);!(t=(a=n.next()).done);t=!0){var o=a.value;this.removeAddress(o)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}if(this.contact.phones){var s=!0,r=!1,l=void 0;try{for(var c,h=k()(this.contact.phones);!(s=(c=h.next()).done);s=!0){var u=c.value;this.removePhone(u)}}catch(t){r=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(r)throw l}}}if(this.contact.emails){var d=!0,p=!1,v=void 0;try{for(var f,m=k()(this.contact.emails);!(d=(f=m.next()).done);d=!0){var _=f.value;this.removeEmail(_)}}catch(t){p=!0,v=t}finally{try{!d&&m.return&&m.return()}finally{if(p)throw v}}}},cancelEditContact:function(){this.clearEditContact(),this.contact=JSON.parse(s()(this.temp_contact)),this.$store.dispatch("toggleEditContact"),this.$store.dispatch("setActiveId",null)},validEntries:function(){var t=this,e=!1;this.$refs.fullName&&(e=this.$refs.fullName.valid);var i=!1;this.$refs.dateOfBirth&&(i=this.$refs.dateOfBirth.valid);return e&&i&&function(){var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.$refs.addresses);!(e=(n=o.next()).done);e=!0)if(!n.value.valid)return!1}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!0}()&&function(){if(!t.contact.phones)return!1;var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.contact.phones);!(e=(n=o.next()).done);e=!0){var s=n.value;if(!(null===s.id||void 0===s.id||t.$refs["phone_"+s.id]&&t.$refs["phone_"+s.id][0].valid))return!1}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!!t.contact.phones[0]&&!!t.contact.phones[0].value}()&&function(){var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.contact.emails);!(e=(n=o.next()).done);e=!0){var s=n.value;if(!(null===s.id||void 0===s.id||t.$refs["email_"+s.id]&&t.$refs["email_"+s.id][0].valid))return!1}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!!t.contact.emails[0].value}()},saveEditedContact:function(){var t=this;if(this.validEntries()){this.$store.dispatch("setSnackbar",{color:"info",message:"Saving contact..."});var e=function(e){var i={};i=e?{color:"error",message:""+e}:{color:"success",message:"Contact saved successfully!"},t.$store.dispatch("setSnackbar",i)};A(t.contact,e),this.toggleEdit(this.contact.id)}else this.$store.dispatch("setSnackbar",{color:"error",message:"There were errors. Correct and resubmit"})},toggleEdit:function(t){var e=this;this.$store.dispatch("setActiveId",t),this.$store.dispatch("toggleEditContact"),this.$store.state.view_contact||(this.$store.dispatch("setViewTransition",!1),this.$nextTick(function(){e.$store.dispatch("toggleViewContact")}))},showAddressAdd:function(t){return t.id===this.contact.addresses[this.contact.addresses.length-1].id&&!!t.value},showPhoneAdd:function(t){return t.id===this.contact.phones[this.contact.phones.length-1].id&&!!t.value},showEmailAdd:function(t){return t.id===this.contact.emails[this.contact.emails.length-1].id&&!!t.value},showAddressIcon:function(t){return t===this.contact.addresses[0].id},showPhoneIcon:function(t){return t===this.contact.phones[0].id},showEmailIcon:function(t){return t===this.contact.emails[0].id},showFullNameRemove:function(){return!!this.contact.fullName&&(!!j.touchevents||this.fullNameHover)},showDateOfBirthRemove:function(){return!!this.contact.dateOfBirth&&(!!j.touchevents||this.dateOfBirthHover)},showAddressRemove:function(t){return this.currentAddressHover===t.id&&!!t.value},showPhoneRemove:function(t){return this.currentPhoneHover===t.id&&!!t.value},showEmailRemove:function(t){return this.currentEmailHover===t.id&&!!t.value}},beforeUpdate:function(){this.contact=this.contactToEdit},updated:function(){var t=this,e=this.$cookie,i=this.contact.phones,a=e.get("countryCode")||"";V()("div[id^='country_']").each(function(){var n=V()(this).attr("id").split("_")[1],o=V()(this);o.intlTelInput({preferredCountries:[a],initialCountry:"auto",geoIpLookup:function(i){null!==a&&""!==a?(i(a),t.$nextTick(function(){o.intlTelInput("setCountry",a)})):V.a.get("https://ipinfo.io",function(){},"jsonp").always(function(n){a=n&&n.country?n.country:"",e.set("countryCode",a,{expires:1}),i(a),t.$nextTick(function(){o.intlTelInput("setCountry",a)})})}}),o.on("close:countrydropdown",function(){var t=o.intlTelInput("getSelectedCountryData").dialCode,e=i.find(function(t){return t.id===parseInt(n)});e.value&&-1!==e.value.indexOf(" ")?e.value="+"+t+e.value.slice(e.value.indexOf(" ")):e.value="+"+t+" ",V()("#country_"+n+"_text").focus()})})}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{fullscreen:t.$vuetify.breakpoint.smAndDown,width:"700px",transition:"dialog-transition","hide-overlay":!1},model:{value:t.$store.state.edit_contact,callback:function(e){t.$set(t.$store.state,"edit_contact",e)},expression:"$store.state.edit_contact"}},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[t._v("\n      Edit contact\n    ")]),t._v(" "),i("div",{style:{borderBottom:"1px solid lightgrey"}},[i("v-container",{staticClass:"pt-4 pb-0",attrs:{"grid-list-sm":""}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseleave:function(e){t.fullNameHover=!1},mouseenter:function(e){t.fullNameHover=!0}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""},on:{mouseenter:function(e){t.avatar_hover=!0},mouseleave:function(e){t.avatar_hover=!1}}},[i("v-avatar",{style:{cursor:"pointer",backgroundSize:"contain",backgroundColor:"white",backgroundImage:t.contact.avatar?"url("+(t.contact.avatar.thumbnail||t.contact.avatar.avatar)+")":"url(../../static/avatars/grey_silhouette.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center",border:"2px solid #E3E3DE"},attrs:{size:"50px"},on:{click:t.openSlim}},[i("v-btn",{staticClass:"ma-0",style:{opacity:t.avatar_hover?"0.5":"0"},attrs:{fab:"",small:"",color:"black"}},[i("v-icon",{attrs:{color:"white"}},[t._v("\n                  photo_camera\n                ")])],1)],1)],1),t._v(" "),i("v-flex",{staticClass:"xs8"},[i("v-text-field",{ref:"fullName",staticClass:"caption",attrs:{autofocus:"",placeholder:"Full Name",rules:t.fullNameRules,required:"",validateOnBlur:!0},model:{value:t.contact.fullName,callback:function(e){t.$set(t.contact,"fullName",e)},expression:"contact.fullName"}})],1),t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showFullNameRemove()?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:t.removeFullName},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1)],1),t._v(" "),i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseleave:function(e){t.dateOfBirthHover=!1},mouseenter:function(e){t.dateOfBirthHover=!0}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[i("v-icon",[t._v("\n              event\n            ")])],1),t._v(" "),i("v-flex",{attrs:{xs8:""}},[i("v-menu",{attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"max-width":"290px","min-width":"290px"},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-text-field",{ref:"dateOfBirth",staticClass:"caption",attrs:{slot:"activator",placeholder:"Date of Birth",readonly:"",rules:t.dateOfBirthRules},slot:"activator",model:{value:t.contact.dateOfBirth,callback:function(e){t.$set(t.contact,"dateOfBirth",e)},expression:"contact.dateOfBirth"}}),t._v(" "),i("v-date-picker",{attrs:{"no-title":"",scrollable:"",actions:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.save,n=e.cancel;return[i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:n}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:a}},[t._v("OK\n                    ")])],1)]}}]),model:{value:t.contact.dateOfBirth,callback:function(e){t.$set(t.contact,"dateOfBirth",e)},expression:"contact.dateOfBirth"}})],1)],1),t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showDateOfBirthRemove()?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:t.removeDateOfBirth},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-spacer")],1),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.contact.addresses,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"address_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentAddressHover=e.id},mouseleave:function(e){t.currentAddressHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showAddressIcon(e.id)?i("v-icon",[t._v("\n                  location_on\n                ")]):t._e()],1),t._v(" "),0===e.value.length?[i("v-flex",{attrs:{xs8:""}},[i("v-text-field",{ref:"addresses",refInFor:!0,staticClass:"caption",attrs:{placeholder:"Address"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"address.value"}})],1)]:[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{ref:"addresses",refInFor:!0,staticClass:"caption",attrs:{placeholder:"Address"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"address.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"address.label"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showAddressRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removeAddress(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showAddressAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addAddress},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)})),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.contact.phones,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"phone_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentPhoneHover=e.id},mouseleave:function(e){t.currentPhoneHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showPhoneIcon(e.id)?i("v-icon",[t._v("\n                  phone\n                ")]):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-3 pr-2 pl-0 ml-0",attrs:{xs1:""}},[i("div",{staticClass:"ml-0 pl-0",attrs:{id:"country_"+e.id}})]),t._v(" "),e.value?[i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{ref:"phone_"+e.id,refInFor:!0,staticClass:"caption",attrs:{type:"tel",placeholder:"Phone",id:"country_"+e.id+"_text",required:"",rules:t.phoneRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"phone.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"phone.label"}})],1)]:[i("v-flex",{attrs:{xs7:""}},[i("v-text-field",{ref:"phone_"+e.id,refInFor:!0,staticClass:"caption",attrs:{type:"tel",placeholder:"Phone",id:"country_"+e.id+"_text",required:"",rules:t.phoneRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"phone.value"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showPhoneRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removePhone(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showPhoneAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addPhone},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)})),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.contact.emails,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"email_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentEmailHover=e.id},mouseleave:function(e){t.currentEmailHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showEmailIcon(e.id)?i("v-icon",[t._v("\n                  mail\n                ")]):t._e()],1),t._v(" "),e.value?[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{ref:"email_"+e.id,refInFor:!0,staticClass:"caption",attrs:{placeholder:"Email",required:"",rules:t.emailRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"email.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"email.label"}})],1)]:[i("v-flex",{attrs:{xs8:""}},[i("v-text-field",{ref:"email_"+e.id,refInFor:!0,staticClass:"caption",attrs:{placeholder:"Email",required:"",rules:t.emailRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"email.value"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showEmailRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removeEmail(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showEmailAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addEmail},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)}))],1),t._v(" "),i("v-card-actions",{staticClass:"pt-0"},[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",large:"",color:"primary"},on:{click:t.cancelEditContact}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",large:"",color:"success",disabled:!t.validEntries()},on:{click:t.saveEditedContact}},[t._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]};var Q=i("VU/8")(G,X,!1,function(t){i("vTLX")},"data-v-5974bbda",null).exports,K=i("W3Iv"),J=i.n(K),Z=i("d7EF"),Y=i.n(Z),tt={name:"view-contact",data:function(){return{avatar_hover:!1,temp_contact:{id:null,fullName:"",avatar:"",emails:[],phones:[],addresses:[],starred:!1,hidden:!1}}},methods:{openSlim:function(){var t=this;this.contact.avatar&&this.$store.state.slim.instance.load(this.contact.avatar.avatar,function(e,i){e&&t.$store.dispatch("setSnackbar",{color:"info",message:"Unable to automatically load your avatar. Proceed with manual upload."})}),this.$store.dispatch("setSlim",{contact:this.contact})},toggleView:function(){this.$store.dispatch("setViewTransition","dialog-transition"),this.$store.dispatch("toggleViewContact")},toggleEdit:function(t){var e=this;this.$store.dispatch("toggleEditContact"),this.$nextTick(function(){e.$parent.$refs.edit_contact_dialog.$refs.fullName.focus()})},toggleDelete:function(){this.$store.dispatch("toggleDeleteContact")},hideContact:function(){},moreActions:function(t,e){switch(t){case"Delete":this.toggleDelete(e);break;case"Hide":this.hideContact(e)}}},computed:{contact:function(){var t=this.$store.getters.getActiveContact;return this.$store.state.edit_contact&&(this.temp_contact=JSON.parse(s()(t))),t||this.temp_contact},iterableContactDetails:function(){if(this.contact.hasOwnProperty("id")){var t=[],e=this.$store.state.icons,i='style="text-decoration: none"',a=!0,n=!1,o=void 0;try{for(var s,r=k()(J()(this.contact));!(a=(s=r.next()).done);a=!0){var l=s.value,c=Y()(l,2),h=c[0],u=c[1];if(e.hasOwnProperty(h)){var d=[];switch(h){case"emails":var p=!0,v=!1,f=void 0;try{for(var m,_=k()(u);!(p=(m=_.next()).done);p=!0){var g=m.value,y='<a href="mailto:'+g.value+'" '+i+">"+g.value+"</a>";y+=g.label?" • "+g.label:"",d.push(y)}}catch(t){v=!0,f=t}finally{try{!p&&_.return&&_.return()}finally{if(v)throw f}}break;case"phones":var w=!0,b=!1,x=void 0;try{for(var C,S=k()(u);!(w=(C=S.next()).done);w=!0){var E=C.value,A='<a href="tel:'+E.value+'" '+i+">"+E.value+"</a>";A+=E.label?" • "+E.label:"",d.push(A)}}catch(t){b=!0,x=t}finally{try{!w&&S.return&&S.return()}finally{if(b)throw x}}break;case"addresses":var T=!0,I=!1,R=void 0;try{for(var O,$=k()(u);!(T=(O=$.next()).done);T=!0){var P=O.value,D="<a href="+('"https://maps.google.com/maps?q='+encodeURIComponent(P.value)+'"'+" target='_blank'")+" "+i+">"+P.value+"</a>";D+=P.label?" • "+P.label:"",d.push(D)}}catch(t){I=!0,R=t}finally{try{!T&&$.return&&$.return()}finally{if(I)throw R}}}t.push({icon:e[h],details:d})}}}catch(t){n=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return t}return{}}}},et={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{fullscreen:t.$vuetify.breakpoint.smAndDown,width:"700px",transition:t.$store.state.view_transition,"hide-overlay":!1},model:{value:t.$store.state.view_contact,callback:function(e){t.$set(t.$store.state,"view_contact",e)},expression:"$store.state.view_contact"}},[i("v-card",[i("v-card-actions",{staticClass:"py-3 px-4 title grey lighten-4",style:{minHeight:"60px"}},[t.$vuetify.breakpoint.mdAndUp?i("v-flex",[i("v-avatar",{staticClass:"mr-3",style:{cursor:"pointer",backgroundSize:"contain",backgroundColor:"white",backgroundImage:t.contact.avatar?"url("+(t.contact.avatar.thumbnail||t.contact.avatar.avatar)+")":"url(../../static/avatars/grey_silhouette.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center",border:"5px solid #E3E3DE"},attrs:{size:"70px"},on:{click:t.openSlim,mouseenter:function(e){t.avatar_hover=!0},mouseleave:function(e){t.avatar_hover=!1}}},[i("v-btn",{staticClass:"ma-0",style:{opacity:t.avatar_hover?"0.5":"0"},attrs:{fab:"",color:"black"}},[i("v-icon",{attrs:{large:"",color:"white"}},[t._v("\n              photo_camera\n            ")])],1)],1),t._v(" "),i("span",{staticClass:"py-4 headline"},[t._v("\n          "+t._s(t.contact.fullName)+"\n        ")])],1):t._e(),t._v(" "),t.$vuetify.breakpoint.smAndDown?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Close")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},on:{click:t.toggleView},slot:"activator"},[i("v-icon",[t._v("close")])],1)],1):t._e(),t._v(" "),i("v-spacer"),t._v(" "),i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Star contact")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",icon:"",small:""},on:{click:function(e){t.contact&&(t.contact.starred=!t.contact.starred)}},slot:"activator"},[t.contact&&!t.contact.starred?i("v-icon",{attrs:{color:"grey darken-3"}},[t._v("\n            star_border\n          ")]):i("v-icon",{attrs:{color:"pink"}},[t._v("\n            star\n          ")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Edit contact")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},on:{click:function(e){t.toggleEdit(t.contact.id)}},slot:"activator"},[i("v-icon",[t._v("mode_edit")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"","max-width":100,disabled:t.$store.state.tooltips}},[i("span",[t._v("More actions")]),t._v(" "),i("v-menu",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",bottom:"",left:"",origin:"center center",transition:"scale-transition","min-width":250},slot:"activator"},[i("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},slot:"activator"},[i("v-icon",[t._v("more_vert")])],1),t._v(" "),i("v-list",t._l(t.$store.getters.getMoreItems,function(e){return i("v-list-tile",{key:e.title,attrs:{avatar:""},on:{click:function(i){t.moreActions(e.name,t.contact.id)}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("\n                  "+t._s(e.icon)+"\n                ")])],1),t._v(" "),i("v-list-tile-title",{staticClass:"body-1 pl-0 ml-0"},[t._v("\n                "+t._s(e.title)+"\n              ")])],1)}))],1)],1),t._v(" "),t.$vuetify.breakpoint.mdAndUp?i("v-tooltip",{attrs:{bottom:""}},[i("span",[t._v("Close")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3",disabled:t.$store.state.tooltips},on:{click:t.toggleView},slot:"activator"},[i("v-icon",[t._v("close")])],1)],1):t._e()],1),t._v(" "),t.$vuetify.breakpoint.smAndDown?i("v-card-actions",{staticClass:"py-0 px-0 title",style:{borderTop:"1px solid lightgray"}},[i("v-flex",{staticClass:"grey lighten-4 ma-0 pa-4",style:{border:"0"}},[i("v-avatar",{staticClass:"mr-3",style:{cursor:"pointer",backgroundSize:"contain",backgroundColor:"white",backgroundImage:t.contact.avatar?"url("+(t.contact.avatar.thumbnail||t.contact.avatar.avatar)+")":"url(../../static/avatars/grey_silhouette.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center",border:"5px solid #E3E3DE"},attrs:{size:"70px"},on:{click:t.openSlim,mouseenter:function(e){t.avatar_hover=!0},mouseleave:function(e){t.avatar_hover=!1}}},[i("v-btn",{staticClass:"ma-0",style:{opacity:t.avatar_hover?"0.5":"0"},attrs:{fab:"",color:"black"}},[i("v-icon",{attrs:{color:"white",large:""}},[t._v("\n              photo_camera\n            ")])],1)],1),t._v(" "),i("span",{staticClass:"headline"},[t._v("\n          "+t._s(t.contact.fullName)+"\n        ")])],1)],1):t._e(),t._v(" "),i("v-list",{staticClass:"pt-3 pb-5",style:{borderBottom:"1px solid lightgray"},attrs:{subheader:"","three-line":""}},[i("v-subheader",{staticClass:"pt-2 pl-4",style:{color:"black"}},[t._v("\n        Contact details\n      ")]),t._v(" "),t._l(t.iterableContactDetails,function(e){return i("v-list-tile",{key:e.icon,staticClass:"ml-4 pl-2 pb-5",style:{maxHeight:"60px"},attrs:{avatar:""}},[i("v-list-tile-avatar",{staticClass:"mr-3 pt-0"},[i("v-icon",[t._v("\n            "+t._s(e.icon)+"\n          ")])],1),t._v(" "),i("v-list-tile-content",t._l(e.details,function(e,a){return i("v-list",{key:a,staticClass:"pb-0"},[i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e)}})],1)}))],1)})],2)],1)],1)},staticRenderFns:[]};var it={name:"delete-contact",methods:{toggleDelete:function(){this.$store.dispatch("toggleDeleteContact")},deleteContact:function(){var t=this;this.$store.dispatch("setSnackbar",{color:"info",message:"Deleting contact..."});var e=this.$store.getters.getActiveId;i=e,a=function(e){var i={};i=e?{color:"error",message:""+e}:{color:"success",message:"Contact deleted successfully!"},t.$store.dispatch("setSnackbar",i)},b.a.database().ref("contacts/"+i).remove(function(t){a(t)});var i,a;this.toggleDelete(),this.$store.state.view_contact&&this.$store.dispatch("toggleViewContact")}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"250px"},model:{value:t.$store.state.delete_contact,callback:function(e){t.$set(t.$store.state,"delete_contact",e)},expression:"$store.state.delete_contact"}},[i("v-card",[i("v-card-text",{staticClass:"subheading text-xs-center"},[t._v("\n      Delete this contact?\n    ")]),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{flat:"",large:"",color:"blue darken-1"},nativeOn:{click:function(e){t.toggleDelete(e)}}},[t._v("\n        Cancel\n      ")]),t._v(" "),i("v-btn",{attrs:{flat:"",large:"",color:"red darken-1"},nativeOn:{click:function(e){t.deleteContact(e)}}},[t._v("\n        Delete\n      ")])],1)],1)],1)},staticRenderFns:[]};var nt={name:"contacts",data:function(){return{last_clicked:null,icon:!1,hover:null}},components:{EditContact:Q,ViewContact:i("VU/8")(tt,et,!1,function(t){i("FCmO")},"data-v-47869e38",null).exports,DeleteContact:i("VU/8")(it,at,!1,function(t){i("Gw1z")},"data-v-c794124c",null).exports},methods:{hideContact:function(t){},toggleView:function(t){this.$store.dispatch("setActiveId",t),this.$store.dispatch("toggleViewContact")},toggleEdit:function(t){var e=this;this.$store.dispatch("setActiveId",t),this.$store.dispatch("toggleEditContact"),this.$nextTick(function(){e.$refs.edit_contact_dialog.$refs.fullName.focus()})},toggleDelete:function(t){this.$store.dispatch("setActiveId",t),this.$store.dispatch("toggleDeleteContact")},moreActions:function(t,e){switch(t){case"Delete":this.toggleDelete(e);break;case"Hide":this.hideContact(e)}}},computed:{selected:{get:function(){return this.$store.getters.getSelected},set:function(t){this.$store.dispatch("setSelected",t)}}}},ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-data-table",{ref:"contacts_data_table",staticClass:"elevation-0 pl-0",style:{overflowX:"hidden"},attrs:{items:t.$store.getters.getContacts,"item-key":"id","hide-actions":"","hide-headers":"","no-data-text":"Add your contact"},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",{staticClass:"ma-2",style:{borderRight:0,borderBottom:0,borderTop:0,borderLeft:t.last_clicked===e.item.id?"3px solid blue":"3px solid transparent",cursor:"pointer",background:e.selected?"#E3E3E3":""},on:{mouseenter:function(i){t.hover=e.item.id},mouseleave:function(e){t.hover=null},click:function(i){t.last_clicked=e.item.id}}},[i("td",{staticClass:"ma-0 pl-2 pr-0",style:{width:"50px",height:"60px"},on:{click:function(t){e.selected=!e.selected}}},[t.hover===e.item.id||e.selected?i("v-checkbox",{attrs:{color:"primary darken-4","hide-details":"","input-value":e.selected}}):i("v-avatar",{class:e.item.avatar?"":e.item.color,attrs:{size:"40px"}},[e.item.avatar?i("img",{attrs:{src:e.item.avatar.thumbnail||e.item.avatar.avatar,alt:"avatar"}}):i("span",{staticClass:"headline white--text "},[t._v("\n                "+t._s(e.item.fullName.slice(0,1).toUpperCase())+"\n              ")])])],1),t._v(" "),i("td",{staticClass:"body-1 pl-3",on:{click:function(i){t.toggleView(e.item.id)}}},[t._v("\n            "+t._s(e.item.fullName)+"\n          ")]),t._v(" "),i("td",{staticClass:"hidden-sm-and-down body-2",on:{click:function(i){t.toggleView(e.item.id)}}},[t._v("\n            "+t._s(e.item.emails[0].value)+"\n          ")]),t._v(" "),i("td",{staticClass:"hidden-sm-and-down body-2",on:{click:function(i){t.toggleView(e.item.id)}}},[t._v("\n            "+t._s(e.item.phones[0].value)+"\n          ")]),t._v(" "),i("td",{staticClass:"text-xs-right pa-0 ma-0",style:{width:"100px"}},[i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Star contact")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",style:{opacity:t.hover===e.item.id?1:0},attrs:{slot:"activator",flat:"",icon:"",small:""},on:{click:function(t){e.item.starred=!e.item.starred}},slot:"activator"},[e.item.starred?i("v-icon",{attrs:{color:"pink"}},[t._v("\n                  star\n                ")]):i("v-icon",{attrs:{color:"grey darken-3"}},[t._v("\n                  star_border\n                ")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Edit contact")]),t._v(" "),i("v-btn",{staticClass:"pa-0 ma-0",style:{opacity:t.hover===e.item.id?1:0},attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},on:{click:function(i){t.toggleEdit(e.item.id)}},slot:"activator"},[i("v-icon",[t._v("mode_edit")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"","max-width":100,disabled:t.$store.state.tooltips}},[i("span",[t._v("More actions")]),t._v(" "),i("v-menu",{staticClass:"pa-0 ma-0",style:{opacity:t.hover===e.item.id?1:0},attrs:{slot:"activator",bottom:"",left:"",origin:"center center",transition:"scale-transition","min-width":250},slot:"activator"},[i("v-btn",{staticClass:"pa-0 ma-0",style:{opacity:t.hover===e.item.id?1:0},attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey darken-3"},slot:"activator"},[i("v-icon",[t._v("more_vert")])],1),t._v(" "),i("v-list",t._l(t.$store.getters.getMoreItems,function(a){return i("v-list-tile",{key:a.title,attrs:{avatar:""},on:{click:function(i){t.moreActions(a.name,e.item.id)}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("\n                        "+t._s(a.icon)+"\n                      ")])],1),t._v(" "),i("v-list-tile-title",{staticClass:"body-1 pl-0 ml-0"},[t._v("\n                      "+t._s(a.title)+"\n                    ")])],1)}))],1)],1)],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),i("view-contact",{ref:"view_contact_dialog"}),t._v(" "),i("edit-contact",{ref:"edit_contact_dialog"}),t._v(" "),i("delete-contact",{ref:"delete_contact_dialog"})],1)},staticRenderFns:[]};var st=i("VU/8")(nt,ot,!1,function(t){i("Stix")},"data-v-4e0227dc",null).exports,rt=i("Gu7T"),lt=i.n(rt),ct=i("ZrCm");i("xVek");var ht={name:"add-contact",data:function(){return{menu:!1,labels:["Home","Work","Other"],avatar_hover:!1,newAddressId:0,newPhoneId:0,newEmailId:0,fullNameHover:!1,dateOfBirthHover:!1,currentAddressHover:null,currentPhoneHover:null,currentEmailHover:null,avatar:{avatar:"",thumbnail:"",filename:""},fullName:"",dateOfBirth:null,addresses:[{id:0,value:"",label:""}],phones:[{id:0,value:"",label:""}],emails:[{id:0,value:"",label:""}],fullNameRules:[function(t){return!!t||"Full Name is required"},function(t){return t&&t.split(" ").length>1&&t.split(" ")[1].length>0||"Full Name must have at least 2 names"}],dateOfBirthRules:[function(t){return!!t||"Date of Birth is required"}],phoneRules:[function(t){return!!t||"Phone is required"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}]}},components:{},computed:{new_contact:function(){return this.$store.getters.getNewContact}},methods:{openSlim:function(){this.$store.dispatch("setSlim",{contact:this.$store.state.new_contact})},addAddress:function(){this.addresses.push({id:++this.newAddressId,value:"",label:""})},addPhone:function(){this.phones.push({id:++this.newPhoneId,value:"",label:""})},addEmail:function(){this.emails.push({id:++this.newEmailId,value:"",label:""})},removeAvatar:function(){var t=this.$store.state.new_contact;t.avatar=null,this.$store.dispatch("setNewContact",t)},removeFullName:function(){this.fullName="",this.$refs.fullName.reset()},removeDateOfBirth:function(){this.dateOfBirth=null,this.$refs.dateOfBirth.reset()},removeAddress:function(t){this.addresses.length>1?this.addresses=this.addresses.filter(function(e){return e.id!==t.id}):(t.value="",t.label="")},removeAddresses:function(){this.addresses=[{id:0,value:"",label:""}]},removePhone:function(t){if(this.phones.length>1)this.phones=this.phones.filter(function(e){return e.id!==t.id});else{t.value="",t.label="";var e=this.$refs["phone_"+t.id];if(e&&e.length>0){var i=!0,a=!1,n=void 0;try{for(var o,s=k()(e);!(i=(o=s.next()).done);i=!0){o.value.reset()}}catch(t){a=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}}}},removePhones:function(){this.phones=[{id:0,value:"",label:""}]},removeEmail:function(t){if(this.emails.length>1)this.emails=this.emails.filter(function(e){return e.id!==t.id});else{t.value="",t.label="";var e=this.$refs["email_"+t.id];if(e&&e.length>0){var i=!0,a=!1,n=void 0;try{for(var o,s=k()(e);!(i=(o=s.next()).done);i=!0){o.value.reset()}}catch(t){a=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw n}}}}},removeEmails:function(){this.emails=[{id:0,value:"",label:""}]},clearAddContact:function(){this.removeAvatar(),this.removeFullName(),this.removeDateOfBirth(),this.removeAddresses(),this.removePhones(),this.removeEmails()},closeAddContact:function(){this.clearAddContact(),this.$store.dispatch("toggleAddContact")},showAddressAdd:function(t){return t.id===this.addresses[this.addresses.length-1].id&&!!t.value},showPhoneAdd:function(t){return t.id===this.phones[this.phones.length-1].id&&!!t.value},showEmailAdd:function(t){return t.id===this.emails[this.emails.length-1].id&&!!t.value},showAddressIcon:function(t){return t===this.addresses[0].id},showPhoneIcon:function(t){return t===this.phones[0].id},showEmailIcon:function(t){return t===this.emails[0].id},showFullNameRemove:function(){return!!this.fullName&&(!!ct.touchevents||this.fullNameHover)},showDateOfBirthRemove:function(){return!!this.dateOfBirth&&(!!ct.touchevents||this.dateOfBirthHover)},showAddressRemove:function(t){return this.currentAddressHover===t.id&&!!t.value},showPhoneRemove:function(t){return this.currentPhoneHover===t.id&&!!t.value},showEmailRemove:function(t){return this.currentEmailHover===t.id&&!!t.value},getNewId:function(){if(this.$store.state.contacts.length>0){var t=this.$store.state.contacts;return Math.max.apply(Math,lt()(t.map(function(t){return t.id})))+1}return 0},validEntries:function(){var t=this,e=!1;this.$refs.fullName&&(e=this.$refs.fullName.valid);var i=!1;this.$refs.dateOfBirth&&(i=this.$refs.dateOfBirth.valid);return e&&i&&function(){var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.$refs.addresses);!(e=(n=o.next()).done);e=!0)if(!n.value.valid)return!1}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!0}()&&function(){var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.phones);!(e=(n=o.next()).done);e=!0){var s=n.value;if(!(null===s.id||void 0===s.id||t.$refs["phone_"+s.id]&&t.$refs["phone_"+s.id][0].valid))return!1}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!!t.phones[0].value}()&&function(){var e=!0,i=!1,a=void 0;try{for(var n,o=k()(t.emails);!(e=(n=o.next()).done);e=!0){var s=n.value;if(!(null===s.id||void 0===s.id||t.$refs["email_"+s.id]&&t.$refs["email_"+s.id][0].valid))return!1}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}return!!t.emails[0].value}()},saveContact:function(){var t=this;if(this.validEntries()){this.$store.dispatch("setSnackbar",{color:"info",message:"Saving contact..."});var e={id:this.getNewId(),fullName:this.fullName,dateOfBirth:this.dateOfBirth,avatar:this.avatar,emails:this.emails,phones:this.phones,addresses:this.addresses,starred:!1,hidden:!1};A(e,function(e){var i={};i=e?{color:"error",message:""+e}:{color:"success",message:"Contact saved successfully!"},t.$store.dispatch("setSnackbar",i)}),this.closeAddContact()}else this.$store.dispatch("setSnackbar",{color:"error",message:"There were errors. Correct and resubmit"})}},beforeUpdate:function(){this.avatar=this.new_contact.avatar},mounted:function(){this.fullName=this.new_contact.fullName,this.dateOfBirth=this.new_contact.dateOfBirth,this.addresses=this.new_contact.addresses,this.phones=this.new_contact.phones,this.emails=this.new_contact.emails},updated:function(){var t=this,e=this.$cookie,i=this.phones,a=e.get("countryCode")||"";V()("div[id^='country_']").each(function(){var n=V()(this).attr("id").split("_")[1],o=V()(this);o.intlTelInput({preferredCountries:[a],initialCountry:"auto",geoIpLookup:function(i){null!==a&&""!==a?(i(a),t.$nextTick(function(){o.intlTelInput("setCountry",a)})):V.a.get("https://ipinfo.io",function(){},"jsonp").always(function(n){a=n&&n.country?n.country:"",e.set("countryCode",a,{expires:1}),i(a),t.$nextTick(function(){o.intlTelInput("setCountry",a)})})}}),o.on("close:countrydropdown",function(){var t=o.intlTelInput("getSelectedCountryData").dialCode,e=i.find(function(t){return t.id===parseInt(n)});e.value&&-1!==e.value.indexOf(" ")?e.value="+"+t+e.value.slice(e.value.indexOf(" ")):e.value="+"+t+" ",V()("#country_"+n+"_text").focus()})})}},ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-dialog",{ref:"add_contact_dialog",attrs:{fullscreen:t.$vuetify.breakpoint.smAndDown,width:"700px",transition:"dialog-bottom-transition","hide-overlay":!1},model:{value:t.$store.state.add_contact,callback:function(e){t.$set(t.$store.state,"add_contact",e)},expression:"$store.state.add_contact"}},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[t._v("\n        Create contact\n      ")]),t._v(" "),i("div",{style:{borderBottom:"1px solid lightgrey"}},[i("v-container",{staticClass:"pt-4 pb-0",attrs:{"grid-list-sm":""}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseleave:function(e){t.fullNameHover=!1},mouseenter:function(e){t.fullNameHover=!0}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""},on:{mouseenter:function(e){t.avatar_hover=!0},mouseleave:function(e){t.avatar_hover=!1}}},[i("v-avatar",{style:{cursor:"pointer",backgroundSize:"contain",backgroundColor:"white",backgroundImage:t.avatar?"url("+t.avatar.avatar+")":"url(../../static/avatars/grey_silhouette.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center",border:"2px solid #E3E3DE"},attrs:{size:"50px"},on:{click:t.openSlim}},[i("v-btn",{staticClass:"ma-0",style:{opacity:t.avatar_hover?"0.5":"0"},attrs:{fab:"",small:"",color:"black"}},[i("v-icon",{attrs:{color:"white"}},[t._v("\n                    photo_camera\n                  ")])],1)],1)],1),t._v(" "),i("v-flex",{staticClass:"xs8"},[i("v-text-field",{ref:"fullName",staticClass:"caption",attrs:{autofocus:"",placeholder:"First name    Last name",rules:t.fullNameRules,required:"",validateOnBlur:!0},model:{value:t.fullName,callback:function(e){t.fullName=e},expression:"fullName"}})],1),t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showFullNameRemove()?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:t.removeFullName},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1)],1),t._v(" "),i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseleave:function(e){t.dateOfBirthHover=!1},mouseenter:function(e){t.dateOfBirthHover=!0}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[i("v-icon",[t._v("\n                event\n              ")])],1),t._v(" "),i("v-flex",{attrs:{xs8:""}},[i("v-menu",{attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"max-width":"290px","min-width":"290px"},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-text-field",{ref:"dateOfBirth",staticClass:"caption",attrs:{slot:"activator",placeholder:"Date of Birth",readonly:"",rules:t.dateOfBirthRules},slot:"activator",model:{value:t.dateOfBirth,callback:function(e){t.dateOfBirth=e},expression:"dateOfBirth"}}),t._v(" "),i("v-date-picker",{attrs:{"no-title":"",scrollable:"",actions:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.save,n=e.cancel;return[i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:n}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",color:"success"},on:{click:a}},[t._v("OK\n                      ")])],1)]}}]),model:{value:t.dateOfBirth,callback:function(e){t.dateOfBirth=e},expression:"dateOfBirth"}})],1)],1),t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showDateOfBirthRemove()?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:t.removeDateOfBirth},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-spacer")],1),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.addresses,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"address_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentAddressHover=e.id},mouseleave:function(e){t.currentAddressHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showAddressIcon(e.id)?i("v-icon",[t._v("\n                    location_on\n                  ")]):t._e()],1),t._v(" "),0===e.value.length?[i("v-flex",{attrs:{xs8:""}},[i("v-text-field",{ref:"addresses",refInFor:!0,staticClass:"caption",attrs:{placeholder:"Address"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"address.value"}})],1)]:[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{ref:"addresses",refInFor:!0,staticClass:"caption",attrs:{placeholder:"Address"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"address.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"address.label"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showAddressRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removeAddress(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showAddressAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addAddress},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)})),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.phones,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"phone_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentPhoneHover=e.id},mouseleave:function(e){t.currentPhoneHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showPhoneIcon(e.id)?i("v-icon",[t._v("\n                    phone\n                  ")]):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-3 pr-2 pl-0 ml-0",attrs:{xs1:""}},[i("div",{staticClass:"ml-0 pl-0",attrs:{id:"country_"+e.id}})]),t._v(" "),e.value?[i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{ref:"phone_"+e.id,refInFor:!0,staticClass:"caption",attrs:{type:"tel",placeholder:"Phone",id:"country_"+e.id+"_text",required:"",rules:t.phoneRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"phone.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"phone.label"}})],1)]:[i("v-flex",{attrs:{xs7:""}},[i("v-text-field",{ref:"phone_"+e.id,refInFor:!0,staticClass:"caption",attrs:{type:"tel",placeholder:"Phone",id:"country_"+e.id+"_text",required:"",rules:t.phoneRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"phone.value"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showPhoneRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removePhone(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showPhoneAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addPhone},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)})),t._v(" "),i("v-list",{staticClass:"pt-0 pb-0"},t._l(t.emails,function(e){return i("v-list-tile",{key:e.id,attrs:{id:"email_tile"}},[i("v-layout",{staticClass:"add-contact-row",attrs:{row:"",wrap:"","align-center":""},on:{mouseenter:function(i){t.currentEmailHover=e.id},mouseleave:function(e){t.currentEmailHover=null}}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[t.showEmailIcon(e.id)?i("v-icon",[t._v("\n                    mail\n                  ")]):t._e()],1),t._v(" "),e.value?[i("v-flex",{attrs:{xs5:""}},[i("v-text-field",{ref:"email_"+e.id,refInFor:!0,staticClass:"caption",attrs:{placeholder:"Email",required:"",rules:t.emailRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"email.value"}})],1),t._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:t.labels,label:"Label","single-line":"",autocomplete:""},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"email.label"}})],1)]:[i("v-flex",{attrs:{xs8:""}},[i("v-text-field",{ref:"email_"+e.id,refInFor:!0,staticClass:"caption",attrs:{placeholder:"Email",required:"",rules:t.emailRules,validateOnBlur:!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"email.value"}})],1)],t._v(" "),i("v-flex",{staticClass:"pb-2 pl-0 ml-0",attrs:{xs1:""}},[t.showEmailRemove(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Remove")]),t._v(" "),i("v-btn",{staticClass:"action-button",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"grey"},on:{click:function(i){t.removeEmail(e)}},slot:"activator"},[i("v-icon",[t._v("clear")])],1)],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"pb-2",attrs:{xs1:""}},[t.showEmailAdd(e)?i("v-tooltip",{attrs:{bottom:"",disabled:t.$store.state.tooltips}},[i("span",[t._v("Add")]),t._v(" "),i("v-btn",{staticClass:"ml-0",attrs:{slot:"activator",flat:"",icon:"",small:"",color:"blue darken-2"},on:{click:t.addEmail},slot:"activator"},[i("v-icon",[t._v("add_circle")])],1)],1):t._e()],1)],2)],1)}))],1),t._v(" "),i("v-card-actions",{staticClass:"pt-0"},[i("v-btn",{attrs:{flat:"",large:"",color:"primary"},on:{click:t.clearAddContact}},[t._v("Clear")]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",large:"",color:"primary"},on:{click:t.closeAddContact}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",large:"",color:"success",disabled:!t.validEntries()},on:{click:t.saveContact}},[t._v("Save")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var dt={data:function(){return{}},methods:{toggleAddContact:function(){var t=this;this.$store.dispatch("toggleAddContact"),this.$nextTick(function(){t.$refs.add_contact_dialog.$refs.fullName.focus()})}},components:{AddContact:i("VU/8")(ht,ut,!1,function(t){i("5QSd")},"data-v-3f94f16e",null).exports,Contacts:st}},pt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-content",[i("v-container",{staticClass:"pl-1 pr-1 pt-2",attrs:{fluid:"","fill-height":""}},[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs12:""}},[i("contacts")],1)],1)],1)],1),t._v(" "),i("v-btn",{attrs:{fab:"",bottom:"",right:"",color:"pink",dark:"",fixed:""},on:{click:function(e){e.stopPropagation(),t.toggleAddContact(e)}}},[i("v-icon",[t._v("add")])],1),t._v(" "),i("add-contact",{ref:"add_contact_dialog"})],1)},staticRenderFns:[]},vt=i("VU/8")(dt,pt,!1,null,null,null).exports,ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-content",[e("v-container",{staticClass:"pl-1 pr-1 pt-2",attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{xs12:""}},[e("div",{staticClass:"pa-4"},[e("h3",[this._v("Frequently Accessed Contacts")]),this._v(" "),e("p",[this._v("To be implemented...")])])])],1)],1)],1)},staticRenderFns:[]};var mt=i("VU/8")({name:"frequent"},ft,!1,function(t){i("439b")},"data-v-961dde22",null).exports,_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-content",[e("v-container",{staticClass:"pl-1 pr-1 pt-2",attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{xs12:""}},[e("div",{staticClass:"pa-4"},[e("h3",[this._v("Duplicate Contacts")]),this._v(" "),e("p",[this._v("To be implemented...")])])])],1)],1)],1)},staticRenderFns:[]};var gt=i("VU/8")({name:"duplicates"},_t,!1,function(t){i("AM44")},"data-v-4f401268",null).exports;n.a.use(q.a);var yt,wt=new q.a({mode:"history",routes:[{path:"/",name:"home",component:vt,redirect:"/contacts"},{path:"/contacts",name:"contacts",component:vt},{path:"/frequent",name:"frequent",component:mt},{path:"/merge",name:"merge",component:gt}]}),bt=i("3EgV"),xt=i.n(bt),kt=i("K/Lq"),Ct=i.n(kt),St=i("NYxO"),Et=i("bOdI"),At=i.n(Et),Tt="TOGGLE_VIEW_CONTACT",It="SET_VIEW_TRANSITION",Rt="TOGGLE_ADD_CONTACT",Ot="TOGGLE_EDIT_CONTACT",$t="TOGGLE_DELETE_CONTACT",Pt=i("ZrCm"),Dt=(yt={},At()(yt,"SET_CONTACTS",function(t,e){t.contacts=e}),At()(yt,"SET_NEW_CONTACT",function(t,e){t.new_contact=e}),At()(yt,Tt,function(t){t.view_contact=!t.view_contact}),At()(yt,It,function(t,e){t.view_transition=e}),At()(yt,Rt,function(t){t.add_contact=!t.add_contact}),At()(yt,Ot,function(t){t.edit_contact=!t.edit_contact}),At()(yt,$t,function(t){t.delete_contact=!t.delete_contact}),At()(yt,"SET_SLIM",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.active,a=void 0===i||i,n=e.instance,o=void 0===n?null:n,s=e.contact,r=void 0===s?null:s;t.slim.active=a,o&&(t.slim.instance=o),r&&(t.slim.contact=r)}),At()(yt,"TOGGLE_DRAWER",function(t){t.drawer=!t.drawer}),At()(yt,"TOGGLE_SEARCH",function(t){t.search=!t.search}),At()(yt,"SET_SELECTED",function(t,e){t.selected=e}),At()(yt,"SET_ACTIVE_ID",function(t,e){t.active_id=e}),At()(yt,"TOGGLE_STAR",function(t,e){var i=t.contacts.find(function(t){return t.id===e});i.starred=!i.starred}),At()(yt,"SET_TOOLTIPS",function(t){t.tooltips=Pt.touchevents}),At()(yt,"SET_SNACKBAR",function(t,e){var i=e.color,a=e.message,n=e.active,o=void 0===n||n;t.snackbar.color=i,t.snackbar.message=a,t.snackbar.active=o}),yt),Bt=function(t,e){(0,t.commit)("SET_CONTACTS",e)},Lt=function(t,e){(0,t.commit)("SET_NEW_CONTACT",e)},Nt=function(t){(0,t.commit)(Tt)},Mt=function(t,e){(0,t.commit)(It,e)},Ht=function(t){(0,t.commit)(Rt)},zt=function(t){(0,t.commit)(Ot)},Ft=function(t){(0,t.commit)($t)},Ut=function(t,e){(0,t.commit)("SET_SLIM",e)},qt=function(t){(0,t.commit)("TOGGLE_DRAWER")},Wt=function(t){(0,t.commit)("TOGGLE_SEARCH")},Vt=function(t,e){(0,t.commit)("SET_SELECTED",e)},jt=function(t,e){(0,t.commit)("SET_ACTIVE_ID",e)},Gt=function(t,e){(0,t.commit)("TOGGLE_STAR",e)},Xt=function(t){(0,t.commit)("SET_TOOLTIPS")},Qt=function(t,e){(0,t.commit)("SET_SNACKBAR",e)},Kt=i("ZrCm");n.a.use(St.a);var Jt=new St.a.Store({state:{contacts:[],new_contact:{id:null,fullName:"",dateOfBirth:"",avatar:null,emails:[{id:0,value:"",label:""}],phones:[{id:0,value:"",label:""}],addresses:[{id:0,value:"",label:""}],starred:!1,hidden:!1},view_contact:!1,add_contact:!1,edit_contact:!1,delete_contact:!1,active_id:null,slim:{active:!1,instance:null,contact:null},drawer:null,search:!1,tooltips:!0,colors:["red","pink","purple","deep-purple","indigo","blue","cyan","teal","green","lime","amber","orange","deep-orange","brown","blue-grey","grey"],view_transition:"dialog-transition",selected:[],more_items:[{icon:"archive",title:"Hide from contacts",name:"Hide"},{icon:"delete",title:"Delete",name:"Delete"}],icons:{emails:"mail",addresses:"location_on",phones:"phone","Hide from contacts":"archive",Delete:"delete"},snackbar:{active:!1,message:"",color:"",timeout:6e3}},mutations:Dt,actions:a,getters:{getContacts:function(t){return t.contacts.filter(function(t){return!t.hidden})},getNewContact:function(t){return t.new_contact},getSelected:function(t){return t.selected},getNumSelected:function(t){return t.selected.length},allSelected:function(t){return t.selected.length===t.contacts.length},getActiveId:function(t){return t.active_id},getActiveContact:function(t){return t.contacts.find(function(e){return e.id===t.active_id})},getMoreItems:function(t){return t.more_items},disableTooltip:function(){return Kt.touchevents}}});i("QCv7"),i("uovM"),i("n4oI");n.a.use(xt.a),n.a.use(Ct.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:wt,store:Jt,template:"<App/>",components:{App:U}})},OkXh:function(t,e){},QCv7:function(t,e){},S7bA:function(t,e){},Stix:function(t,e){},ZrCm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a);!function(t,e,i){function a(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):h?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}var o=[],s=[],r={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){s.push({name:t,fn:e,options:i})},addAsyncTest:function(t){s.push({name:null,fn:t})}},l=function(){};l.prototype=r,l=new l;var c=e.documentElement,h="svg"===c.nodeName.toLowerCase(),u=r._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];r._prefixes=u;var d=r.testStyles=function(t,i,n,o){var s,r,l,u,d=a("div"),p=function(){var t=e.body;return t||(t=a(h?"svg":"body"),t.fake=!0),t}();if(parseInt(n,10))for(;n--;)(l=a("div")).id=o?o[n]:"modernizr"+(n+1),d.appendChild(l);return(s=a("style")).type="text/css",s.id="smodernizr",(p.fake?p:d).appendChild(s),p.appendChild(d),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),d.id="modernizr",p.fake&&(p.style.background="",p.style.overflow="hidden",u=c.style.overflow,c.style.overflow="hidden",c.appendChild(p)),r=i(d,t),p.fake?(p.parentNode.removeChild(p),c.style.overflow=u,c.offsetHeight):d.parentNode.removeChild(d),!!r};l.addTest("touchevents",function(){var i;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)i=!0;else{var a=["@media (",u.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");d(a,function(t){i=9===t.offsetTop})}return i}),function(){var t,e,i,a,r,c;for(var h in s)if(s.hasOwnProperty(h)){if(t=[],(e=s[h]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(u=e.fn,d="function",a=(void 0===u?"undefined":n()(u))===d?e.fn():e.fn,r=0;r<t.length;r++)1===(c=t[r].split(".")).length?l[c[0]]=a:(!l[c[0]]||l[c[0]]instanceof Boolean||(l[c[0]]=new Boolean(l[c[0]])),l[c[0]][c[1]]=a),o.push((a?"":"no-")+c.join("-"))}var u,d}(),function(t){var e=c.className,i=l._config.classPrefix||"";if(h&&(e=e.baseVal),l._config.enableJSClass){var a=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(a,"$1"+i+"js$2")}l._config.enableClasses&&(e+=" "+i+t.join(" "+i),h?c.className.baseVal=e:c.className=e)}(o),delete r.addTest,delete r.addAsyncTest;for(var p=0;p<l._q.length;p++)l._q[p]();t.Modernizr=l}(window,document)},n4oI:function(t,e){},uovM:function(t,e){},vTLX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2fa43c8c0ca7a4c55640.js.map